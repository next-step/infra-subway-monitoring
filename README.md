<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install

#### npm ì„¤ì¹˜

```
cd frontend
npm install
```

> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage

#### webpack server êµ¬ë™

```
npm run dev
```

#### application êµ¬ë™

```
./gradlew clean build
```

<br>

### 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

---

## ìš”êµ¬ì‚¬í•­

- [x] ì›¹ ì„±ëŠ¥ ì˜ˆì‚° ì‘ì„± í›„ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ë„ì¶œ

### ì›¹ ì„±ëŠ¥ ì¸¡ì •

| Desktop | Running Map | ì„œìš¸êµí†µê³µì‚¬ | ë„¤ì´ë²„ì§€ë„  | ì¹´ì¹´ì˜¤ë§µ   |
|---------|-------------|--------|--------|--------|
| FCP     | 2.7s        | 1.5s   | 0.5s   | 0.6s   |
| SI      | 2.7s        | 2.1s   | 3.8s   | 2.0s   |
| LCP     | 2.8s        | 2.2s   | 4.8s   | 2.0s   |
| TTI     | 2.8s        | 2.0s   | 3.8s   | 3.5s   |
| TBT     | 0.05s       | 0.25s  | 1.190s | 1.02s  |
| CLS     | 0.004s      | 0.001s | 0.019s | 0.721s |

| Mobile | Running Map | ì„œìš¸êµí†µê³µì‚¬ | ë„¤ì´ë²„ì§€ë„ | ì¹´ì¹´ì˜¤ë§µ |
|--------|-------------|--------|-------|------|
| FCP    | 15.1s       | 6.3s   | 2.2s  | -    |
| SI     | 15.1s       | 7.4s   | 5.7s  | -    |
| LCP    | 15.6s       | 6.5s   | 7.0s  | -    |
| TTI    | 15.6s       | 8.3s   | 6.0s  | -    |
| TBT    | 0.4s        | 0.49s  | 0.31s | -    |
| CLS    | 0.42s       | 0s     | 0.03s | -    |

`* ì¹´ì¹´ì˜¤ë§µì€ ëª¨ë°”ì¼ì€ ì¹´ì¹´ì˜¤ì§€í•˜ì²  ì•±ìœ¼ë¡œë§Œ ì§€ì›í•˜ì—¬ ì œì™¸`

### ìš©ì–´ ì •ë¦¬

* FCP(First Contentful Paint) : ì´ˆê¸° DOM ì½˜í…ì¸ ë¥¼ ë Œë”ë§í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ìœ¼ë¡œ ì²«ë²ˆì§¸ í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ê°€ í‘œì‹œë˜ëŠ” ì‹œê°„
* LCP(Largest Contentful Paint) : ê°€ì¥ í° ì½˜í…ì¸ ë¥¼ í˜ì´ì§€ì— ë Œë”ë§í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ (ì´ë¯¸ì§€, ë™ì˜ìƒ, ë°°ê²½í™”ë©´ ë“±)
* SI(Speed Index) : ì½˜í…ì¸ ê°€ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì§„í–‰ ì†ë„ë¥¼ ì¸¡ì •
* TTI(Time to Interactive) : ì‚¬ìš©ìê°€ í˜ì´ì§€ì™€ ì™„ì „í•˜ê²Œ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆì„ ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„
* TBT(Time Blocking Time) : ë§ˆìš°ìŠ¤ í´ë¦­, í™”ë©´ íƒ­ ë˜ëŠ” í‚¤ë³´ë“œ ëˆ„ë¦„ê³¼ ê°™ì€ ì‚¬ìš©ì ì…ë ¥ì— í˜ì´ì§€ê°€ ì‘ë‹µí•˜ì§€ ëª»í•˜ë„ë¡ ì°¨ë‹¨ëœ ì´ ì‹œê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤
* CLS(Cumulative Layout Shift) : ì‚¬ìš©ìê°€ ì˜ˆìƒì¹˜ ëª»í•œ ë ˆì´ì•„ì›ƒ ì´ë™ì„ ê²½í—˜í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì ìˆ˜ë¡œ ë ˆì´ì•„ì›ƒ ë¶ˆì•ˆì •ì´ ì‚¬ìš©ìì—ê²Œ ë¯¸ì¹˜ëŠ” ë¶€ì •ì ì¸ ì˜í–¥ì— ëŒ€í•´ ê²€ì‚¬

---

1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”

- ê²½ìŸì‚¬ë“¤ê³¼ ë¹„êµí–ˆì„ë•Œ ì„±ëŠ¥ì´ í˜„ì €íˆ ë‚®ì•„ ê²½ìŸì‚¬ë“¤ê³¼ ë¹„ìŠ·í•œ ìˆ˜ì¤€ ì´ìƒìœ¼ë¡œ ì„±ëŠ¥ì˜ˆì‚° ì„¤ì •
    - ì„œìš¸êµí†µê³µì‚¬ì˜ ê²½ìš° ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ì— ë¹„í•´ ì„±ëŠ¥ì´ ë‚®ì•„ ì œì™¸
    - Desktopì˜ ê²½ìš° ë„¤ì´ë²„ì§€ë„ì™€ ì¹´ì¹´ì˜¤ë§µì˜ í‰ê·  ê°’ì„ ì¸¡ì •í•˜ì—¬ ëª©í‘œë¡œ ì„¤ì •
    - Mobileì˜ ê²½ìš° ë„¤ì´ë²„ì§€ë„ë¥¼ ëª©í‘œë¡œ ì„¤ì •

|         | FCP  | SI   | LCP  | TTI   | TBT   | CLS    |
|---------|------|------|------|-------|-------|--------|
| Desktop | 0.5s | 2.9s | 3.4s | 3.65s | 0.05s | 0.004s |
| Mobile  | 2.2s | 5.7s | 7.0s | 6.0s  | 0.31s | 0.03s  |

---

2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ì˜ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”.

- `Lighthouse`ì˜ 6ê°€ì§€ ì§€í‘œì¤‘ ê°€ì¤‘ì¹˜ê°€ ë†’ì€ LCP, TBTë¥¼ ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ë¡œ ê°œì„ 
- í˜„ì¬ í˜ì´ì§€ ë¡œë”©ì‹œ ìë°”ìŠ¤í¬ë¦½íŠ¸, ì´ë¯¸ì§€ ë“±ì˜ ë¹„ì¤‘ì´ ë„ˆë¬´ ì»¤ì„œ ìš°ì„ ì ìœ¼ë¡œ ê°œì„ ì´ í•„ìš”

```text
* ê°œì„ ë°©ë²• *
1. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¤„ì´ê¸°
     - /js/vendor.js, /js/main.js
2. í…ìŠ¤íŠ¸ ì••ì¶•(gzip)ì„ ì‚¬ìš©
     - /js/vendor.js, /js/main.js
3. ë Œë”ë§ ì°¨ë‹¨ ë¦¬ì†ŒìŠ¤ ì œê±°í•˜ê¸°
     - Font, CSS
4. ìºì‹œ ì„¤ì •ì„ í†µí•´ í˜ì´ì§€ ë¡œë”© ê°œì„ 
   - /js/vendors.js, /js/main.js, /images/main_logo.png
5. ì›¹í°íŠ¸ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œ
6. ì´ë¯¸ì§€ ìš”ì†Œì— width, height ì„¤ì •
   - /images/main_logo.png, /images/logo_small.png
```

---

### 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸ì„±

---

#### ìš”êµ¬ì‚¬í•­

1. ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ì€ ì–´ëŠì •ë„ë¡œ ì„¤ì •í•˜ì…¨ë‚˜ìš”
    1. ëª©í‘œ rps êµ¬í•˜ê¸°
        - ì°¸ê³  ë°ì´í„°
            - [ë„¤ì´ë²„ ì§€ë„, ì¹´ì¹´ì˜¤ë§µ MAU](https://mobile.newsis.com/view.html?ar_id=NISX20220927_0002028167)
            - [ì„œìš¸ì‹œ ì§€í•˜ì²  í˜¸ì„ ë³„ ì—­ë³„ ì‹œê°„ëŒ€ë³„ ìŠ¹í•˜ì°¨ ì¸ì› ì •ë³´](https://data.seoul.go.kr/dataList/OA-12252/S/1/datasetView.do)

        1. ìš°ì„  ì˜ˆìƒ 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU)ë¥¼ ì •í•´ë´…ë‹ˆë‹¤.
            - MAU - ë„¤ì´ë²„ ì§€ë„ (2,129ë§Œëª…), ì¹´ì¹´ì˜¤ë§µ (950ë§Œëª…)
            - DAU - ë„¤ì´ë²„ ì§€ë„ (71ë§Œëª…), ì¹´ì¹´ì˜¤ë§µ (32ë§Œëª…)
            - ì˜ˆìƒ 1ì¼ ì‚¬ìš©ììˆ˜ - 200,000 (20ë§Œëª…)
        2. í”¼í¬ ì‹œê°„ëŒ€ì˜ ì§‘ì¤‘ë¥ ì„ ì˜ˆìƒí•´ë´…ë‹ˆë‹¤. (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½)
            - í”¼í¬ ì‹œê°„ëŒ€ : 8ì‹œ ~ 9ì‹œ / 18ì‹œ ~ 19ì‹œ
            - (2.3 / 1) 2 - 2.5ë°° ì •ë„ í”¼í¬ ì‹œê°„ëŒ€ ìŠ¹í•˜ì°¨ ìŠ¹ê° ì¦ê°€
        3. 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† í˜¹ì€ ìš”ì²­ìˆ˜ë¥¼ ì˜ˆìƒí•´ë´…ë‹ˆë‹¤.
            - 3 - ì¶œê·¼ê¸¸ + í‡´ê·¼ê¸¸ + a
        4. ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Throughputì„ ê³„ì‚°í•©ë‹ˆë‹¤.
            - 1ì¼ ì´ ì ‘ì† ìˆ˜ (DAU * í‰ê·  ì ‘ì† ìˆ˜) = (200,000 * 3) = 600,000
            - 1ì¼ í‰ê·  rps (1ì¼ ì´ ì ‘ì† ìˆ˜ / 86,400) = (600,000 / 86,400) = 6.94 rps
            - 1ì¼ ìµœëŒ€ rps (1ì¼ í‰ê·  RPS * (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½)) = (6.94 * (2.3 / 1)) = 15.96 rps

    2. VUser êµ¬í•˜ê¸°
        - ìš”ì²­ ì‹œë‚˜ë¦¬ì˜¤ : ë©”ì¸ í˜ì´ì§€ ì´ë™ > ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™ > ë¡œê·¸ì¸ ìš”ì²­ > ë¡œê·¸ì¸ ì™„ë£Œ > ê²½ë¡œ ê²€ìƒ‰ í˜ì´ì§€ ì´ë™ > ê²½ë¡œ ê²€ìƒ‰ (ì´ 6ê°œì˜ ìš”ì²­)
        - T (R * ìš”ì²­ ì´ ì†Œìš”ì‹œê°„) + ì§€ì—°ì‹œê°„ = (6 * 0.1) + 1 = 1.6
            - T: a value larger than the time needed to complete a VU iteration
            - R: the number of requests per VU iteration
            - ë‚´ë¶€ë§ì—ì„œ í…ŒìŠ¤íŠ¸í•  ê²½ìš° ì˜ˆìƒ latency : 1s
        - VU (ëª©í‘œ rps * T) / R = (6.94 * 1.6) / 3 = 3.7ëª…
   
    3. ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„
       - WEB(nginx), WAS(tomcat), DB(mysql)
    
    4. ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œ ì €ì¥ë  ë°ì´í„° ê±´ìˆ˜ ë° í¬ê¸°
       - ë…¸ì„ : 23ê±´
       - ì—­: 616ê±´
       - êµ¬ê°„: 340ê±´

2. Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”

- Smoke Test - `/k6/smoke/smoke.js`, `/k6/smoke/smoke-k6.png`, `/k6/smoke/smoke-grafana.png`
    - ìµœì†Œí•œì˜ ë¶€í•˜ë¡œ êµ¬ì„±ëœ í…ŒìŠ¤íŠ¸, í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸
    - VU : 1
- Load Test - `/k6/load/load.js`, `/k6/load/load-k6.png`, `/k6/load/load-grafana.png`
    - ì„œë¹„ìŠ¤ì˜ í‰ì†Œ íŠ¸ë˜í”½ê³¼ ìµœëŒ€ íŠ¸ë˜í”½ ìƒí™©ì—ì„œ ì„±ëŠ¥ì„ í™•ì¸
        - í‰ê·  Virtual User : 4
        - ìµœëŒ€ Virtual User : 9
- Stress Test - `/k6/stress/stress.js`, `/k6/stress/stress-k6.png`, `/k6/stress/stress-grafana.png`,
  `/k6/stress/stress-error-1-k6.png`, `/k6/stress/stress-error-1-grafana.png`,
  `/k6/stress/stress-error-2-k6.png`, `/k6/stress/stress-error-2-grafana.png`
    - ì„œë¹„ìŠ¤ê°€ ê·¹í•œì˜ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸

- í…ŒìŠ¤íŠ¸ ê²°ê³¼
  - í”¼í¬ ì‹œê°„ëŒ€ ìš”ì²­ ì§‘ì¤‘ë  ê²½ìš° ì‘ë‹µ ì‹œê°„ ì €í•˜ ë°œìƒ
  - `http_req_duration` ê°œì„  í•„ìš”
    - Smoke Test
      - í‰ê·  ì‘ë‹µì‹œê°„ `24.62ms`, ìµœëŒ€ ì‘ë‹µì‹œê°„ `238.68ms` ì†Œìš”
    - Load Test
      - í‰ê·  ì‘ë‹µì‹œê°„ `23.42ms`, ìµœëŒ€ ì‘ë‹µì‹œê°„ `706.71ms` ì†Œìš”
    - Stress Test
      - Virtual User 260ëª…ê¹Œì§€ ì‘ë‹µ ê°€ëŠ¥
      - í‰ê·  ì‘ë‹µì‹œê°„ `700ms`, ìµœëŒ€ ì‘ë‹µì‹œê°„ `2.78s` ì†Œìš”

---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§

---

#### ìš”êµ¬ì‚¬í•­

- [x] ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ë‹¨í•˜ê¸° ì‹¤ìŠµì„ ì§„í–‰í•´ë³´ê³  ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œë¥¼ ìˆ˜ì •
- [ ] ë¡œê·¸ ì„¤ì •í•˜ê¸°
  - [ ] Application Log íŒŒì¼ë¡œ ì €ì¥í•˜ê¸°
    - [ ] íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“±ì˜ ì´ë²¤íŠ¸ì— ë¡œê¹…ì„ ì„¤ì • 
    - [ ] ê²½ë¡œì°¾ê¸° ë“±ì˜ ì´ë²¤íŠ¸ ë¡œê·¸ë¥¼ JSONìœ¼ë¡œ ìˆ˜ì§‘
  - [ ] Nginx Access Log ì„¤ì •í•˜ê¸°
- [ ] CloudWatchë¡œ ëª¨ë‹ˆí„°ë§
  - [ ] CloudWatchë¡œ ë¡œê·¸ ìˆ˜ì§‘í•˜ê¸°
  - [ ] CloudWatchë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘í•˜ê¸°
  - [ ] USE ë°©ë²•ë¡ ì„ í™œìš©í•˜ê¸° ìš©ì´í•˜ë„ë¡ ëŒ€ì‹œë³´ë“œ êµ¬ì„±

1. ê° ì„œë²„ë‚´ ë¡œê¹… ê²½ë¡œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”

2. CloudWatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”
