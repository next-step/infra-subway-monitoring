<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install
#### npm ì„¤ì¹˜
```
cd frontend
npm install
```
> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage
#### webpack server êµ¬ë™
```
npm run dev
```
#### application êµ¬ë™
```
./gradlew clean build
```
<br>


### 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- [pagespeed](https://pagespeed.web.dev/)

| ë°ìŠ¤í¬íƒ‘ | RUNNINGMAP | ì„œìš¸êµí†µê³µì‚¬ | ë„¤ì´ë²„ì§€ë„ | ì¹´ì¹´ì˜¤ë§µ | ê²½ìŸì‚¬ í‰ê·  |
| --- | --- | --- | --- | --- | --- |
| FCP | 2.7s | 1.4s | 0.6s | 0.5s | 0.8s |
| TTI | 2.8s | 1.9s | 1.2s | 0.7s | 1.3s |
| SI | 2.7s | 2.0s | 2.1s | 2.3s | 2.1s |
| TBT | 80ms | 250ms | 40ms | 0ms | 97ms |
| LCP | 2.8s | 2.1s | 1.6s | 1.2s | 1.6s |
| CLS | 0.004 | 0.001 | 0.006 | 0.003 | 0.003 |
| ì„±ëŠ¥ì ìˆ˜ | 68 | 73 | 90 | 92 | 85 |
- ë¹„êµí•­ëª©
  - FCP(First Contentful Paint) - ì²« ë²ˆì§¸ í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ê°€ í‘œì‹œë˜ëŠ” ì‹œê°„
  - TTI (Time to Interactive) - ì™„ì „íˆ í˜ì´ì§€ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆê²Œ ë  ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„
  - SI (Speed Index) - í˜ì´ì§€ ì½˜í…ì¸ ê°€ ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ í‘œì‹œë˜ëŠ”ì§€
  - TBT (Total Blocking Time) - FCPì™€ TTIì˜ ëª¨ë“  ì‹œê°„ì˜ í•©ìœ¼ë¡œ ì‚¬ìš©ì ì…ë ¥ìœ¼ë¡œë¶€í„° í˜ì´ì§€ê°€ ì‘ë‹µí•˜ì§€ ëª»í•˜ë„ë¡ ì°¨ë‹¨ëœ ì´ ì‹œê°„
  - LCP (Largest Contentful Paint)- ìµœëŒ€ í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ê°€ í‘œì‹œë˜ëŠ” ì‹œê°„
  - CLS (Cumulative Layout Shift) - í‘œì‹œ ì˜ì—­ ì•ˆì— ë³´ì´ëŠ” ìš”ì†Œì˜ ì´ë™ì„ ì¸¡ì •
--- 
1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”
- ê²½ìŸì‚¬ í‰ê· ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì‘ë‹µì‹œê°„ ì°¨ì´ë¥¼ ì¸ì‹í•˜ëŠ” +20% ì‚¬ì´ì˜ ê°’ì„ ì ì • ê¸°ì¤€ìœ¼ë¡œ ì¡ì„ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

|  | ê²½ìŸì‚¬ í‰ê·  | ê²½ìŸì‚¬ í‰ê·  + 20% | RUNNINGMAP |
| --- | --- | --- | --- |
| FCP | 0.8s | 0.96s | 2.7s |
| TTI | 1.3s | 1.56s | 2.8s |
| SI | 2.1s | 2.52s | 2.7s |
| TBT | 97ms | 116ms | 80ms |
| LCP | 1.6s | 1.92s | 2.8s |
| CLS | 0.003 | 0.0036 | 0.004 |

- ê²½ìŸì‚¬ í‰ê· ëŒ€ë¹„ ì°¨ì´ê°€ ë§ì€ í•­ëª©ì¸ FCP, TTI, LCPì— ëŒ€í•œ ì„±ëŠ¥ ê°œì„ ì´ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤.
2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ì˜ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”.

pagespeedì˜ ì¶”ì²œì‚¬í•­ì„ ì ìš©í•˜ë©´ FCPì™€ LCPì— ëŒ€í•œ ì„±ëŠ¥ ê°œì„ ì´ ê°€ëŠ¥í•  ê²ƒìœ¼ë¡œ ë³´ì´ë©°, FCPì™€ LCP ê°œì„ ì‹œ TTIë„ ê°œì„ ë  ê²ƒìœ¼ë¡œ ìƒê°ë©ë‹ˆë‹¤.
- í…ìŠ¤íŠ¸ ì••ì¶• ì‚¬ìš© : FCP, LCP - 1.48s
- ë Œë”ë§ ì°¨ë‹¨ ë¦¬ì†ŒìŠ¤ ì œê±° FCP, LCP - 0.16s
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¤„ì´ê¸° LCP - 0.56s

ìœ„ ê°œì„ ì‚¬í•­ì„ ëª¨ë‘ ì ìš©í•˜ë©´ ì•„ë˜ í‘œì˜ ì‘ë‹µì‹œê°„ì„ ì–»ì„ ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë©ë‹ˆë‹¤.

| | ì„±ëŠ¥í–¥ìƒ ë²”ìœ„ | ê¸°ëŒ€ ì‘ë‹µì‹œê°„ |
| --- |---| --- |
| FCP | -1.64s | 1.06s | 
| LCP | -2.2s | 0.6s | 
| TTI | -1.64s | 1.16s | 


---

### 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸ 
1. ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ì€ ì–´ëŠì •ë„ë¡œ ì„¤ì •í•˜ì…¨ë‚˜ìš”
- ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„
    - nginx(proxy) -> Spring Boot (was server) -> mysql(db)
- ëª©í‘œê°’ ì„¤ì •
    1. ìš°ì„  ì˜ˆìƒ 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU) ì˜ˆìƒ
        - ê²½ìŸì‚¬ì˜ DAUë¥¼ ë°”íƒ•ìœ¼ë¡œ í‰ê· ì¹˜ë¥¼ ì„¤ì •(22ë…„ 10ì›” ê¸°ì¤€ / [ë¹„êµì‚¬ì´íŠ¸](https://www.similarweb.com/))
            - ë„¤ì´ë²„ì§€ë„ : 530ë§Œ(MAU) -> 17ë§Œ(DAU)
            - ì¹´ì¹´ì˜¤ì§€ë„ : 185ë§Œ(MAU) -> 6ë§Œ(DAU)
        - ëª©í‘œ DAU -> `11.5ë§Œ`
    2. í”¼í¬ ì‹œê°„ëŒ€ì˜ ì§‘ì¤‘ë¥ ì„ ì˜ˆìƒ (ìµœëŒ€ íŠ¸ê°œí”½ / í‰ì†Œ íŠ¸ë˜í”½)
        - ëŒ€ì¤‘êµí†µ ì‹œê°„ëŒ€ë³„ ì´ìš©ë¥ ê³¼ ë¹„ìŠ·í•˜ê²Œ íŠ¸ë˜í”½ì´ ëª°ë¦¬ê²ƒìœ¼ë¡œ ì˜ˆì¸¡í•´ ì‹œê°„ëŒ€ë³„ ìŠ¹í•˜ì°¨ ì¸ì›ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì˜ˆìƒ([ê¸°ì¤€ìë£Œ](https://insfiler.com/detail/rt_transit_time-0002?category=life))
        - í”¼í¬ ì‹œê°„ëŒ€ : 18-19ì‹œ (ì „ì²´ ìŠ¹í•˜ì°¨ì˜ 9.2í¼ì„¼íŠ¸)
        - 9.2 / 4.7 = `1.95`
    3. 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† í˜¹ì€ ìš”ì²­ìˆ˜ë¥¼ ì˜ˆ
        - ì„œë¹„ìŠ¤ íë¦„ : ì‚¬ì´íŠ¸ ì ‘ì† -> ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™ -> ë¡œê·¸ì¸ -> ê²½ë¡œ ê²€ìƒ‰ í˜ì´ì§€ ì´ë™ -> ê²½ë¡œ ê²€ìƒ‰
        - ì¼ 2íšŒ ì ‘ì† * ìš”ì²­ 5íšŒ => `10íšŒ`
    4. ì˜ˆìƒì„ ë°”íƒ•ìœ¼ë¡œ Throughputì„ ê³„ì‚°
        - 1ì¼ ì´ ì ‘ì† ìˆ˜ : 11.5 * 10  = 115ë§Œ
        - 1ì¼ í‰ê·  rps : 115ë§Œ / 86,400 = `13.3rps`
        - 1ì¼ ìµœëŒ€ rps : 13.3 * 1.95 = `25.935rps`
    5. Latency
        - `100ms`
    6. Vuser
        - R = `5`
        - T = (5 * 0.1) + 1 => `1.5`
        - í‰ê·  VUser : (13.3 * 1.5) / 5 = 3.99 => `4`
        - ìµœëŒ€ VUSer : (25.935 * 1.5) /5 = 7.1859 => `7`
- ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œ ì €ì¥ë  ë°ì´í„° ê±´ìˆ˜ ë° í¬ê¸°
    - Line : 13
    - Section : 340
    - Station : 616
    - Member : 1
2. Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”
    - Smoke
      - [smoke.js](src/main/resources/docs/smoke/smoke.js)
      - ![smoke-k6](src/main/resources/docs/smoke/smoke-k6.png)
      - ![smoke-grafana](src/main/resources/docs/smoke/smoke-grafana.png)
    - Load
      - [load-avg.js](src/main/resources/docs/load/load-avg.js)
      - ![load-avg-k6](src/main/resources/docs/load/load-avg-k6.png)
      - ![load-avg-grafana](src/main/resources/docs/load/load-avg-grafana.png)
      - [load-peak.js](src/main/resources/docs/load/load-peak.js)
      - ![load-peak-k6](src/main/resources/docs/load/load-peak-k6.png)
      - ![load-peak-grafana](src/main/resources/docs/load/load-peak-grafana.png)
    - Stress
      - [stress.js](src/main/resources/docs/stress/stress.js)
      - ![stress-k6](src/main/resources/docs/stress/stress-k6.png)
      - ![stress-grafana](src/main/resources/docs/stress/stress-grafana.png)
---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§
1. ê° ì„œë²„ë‚´ ë¡œê¹… ê²½ë¡œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”

2. Cloudwatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”

---

# ğŸš€ 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

## ìš”êµ¬ì‚¬í•­
- [x] ì›¹ ì„±ëŠ¥ ì˜ˆì‚° ì‘ì„± í›„ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ë„ì¶œ
  - ê°€ì„¤ì„ ì„¸ìš°ëŠ” ë‹¨ê³„ì´ë¯€ë¡œ, ì •ë‹µì€ ì—†ìŠµë‹ˆë‹¤. ì£¼ì–´ì§„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‚˜ë¦„ì˜ ë…¼ë¦¬ë§Œ ì„¸ìš°ë©´ ë©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì˜¤í”ˆ ë“± ì—¬ëŸ¬ ìƒí™©ì—ì„  ì£¼ì–´ì§„ ì •ë³´ê°€ ì œí•œì ì´ë¼, ê°€ì„¤ì„ ì„¸ìš°ê³  í…ŒìŠ¤íŠ¸í•˜ê³  ìš´ì˜í™˜ê²½ì—ì„œ ê²€ì¦í•´ë³¼ ìˆ˜ ë°–ì— ì—†ì–´ìš”.

### íŒíŠ¸ 
1. ì›¹ ì„±ëŠ¥ ì˜ˆì‚° ì‘ì„±í•˜ê¸°
   WebPageTest, PageSpeed ë“±ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œ í›„, ì›¹ ì„±ëŠ¥ ì˜ˆì‚°ì„ ì‘ì„±í•©ë‹ˆë‹¤. 
- ê²½ìŸì‚¬
  - ì„œìš¸êµí†µê³µì‚¬
  - ë„¤ì´ë²„ì§€ë„
  - ì¹´ì¹´ì˜¤ë§µ
---
# ğŸš€ 2ë‹¨ê³„ - ë¶€í•˜í…ŒìŠ¤íŠ¸

## ìš”êµ¬ì‚¬í•­
- [x] ë¶€í•˜ í…ŒìŠ¤íŠ¸
  - [x] í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ ì •ë¦¬
    - [x] ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„
    - [x] ëª©í‘¯ê°’ ì„¤ì • (latency, throughput, ë¶€í•˜ ìœ ì§€ê¸°ê°„)
    - [x] ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œ ì €ì¥ë  ë°ì´í„° ê±´ìˆ˜ ë° í¬ê¸°
- [x] ì•„ë˜ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [x] ì ‘ì† ë¹ˆë„ê°€ ë†’ì€ í˜ì´ì§€
  - [x] ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” í˜ì´ì§€
  - [x] ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ”ë° ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€
- [x] Smoke, Load, Stress í…ŒìŠ¤íŠ¸ í›„ ê²°ê³¼ë¥¼ ê¸°ë¡

### ìš©ì–´ì •ë¦¬
- smoke í…ŒìŠ¤íŠ¸
  - ìµœì†Œí•œì˜ ë¶€í•˜ë¡œ êµ¬ì„±ëœ í…ŒìŠ¤íŠ¸ë¡œ, í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸.
  - ìµœì†Œ ë¶€í•˜ ìƒíƒœì—ì„œ ì‹œìŠ¤í…œì— ì˜¤ë¥˜ ë°œìƒ í™•ì¸
  - VUserë¥¼ 1 ~ 2ë¡œ êµ¬ì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸
- load í…ŒìŠ¤íŠ¸
  - ì„œë¹„ìŠ¤ì˜ í‰ì†Œ íŠ¸ë˜í”½ê³¼ ìµœëŒ€ íŠ¸ë˜í”½ ìƒí™©ì—ì„œ ì„±ëŠ¥ê³¼ ì •ìƒ ë™ì‘ ì—¬ë¶€ í™•ì¸
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì¸í”„ë¼ ë³€ê²½(scale out, DB failover ë“±)ì‹œì— ì„±ëŠ¥ ë³€í™” í™•ì¸
  - ì™¸ë¶€ ìš”ì¸(ê²°ì œ ë“±)ì— ë”°ë¥¸ ì˜ˆì™¸ ìƒí™©ì„ í™•ì¸
- stress í…ŒìŠ¤íŠ¸
  - ê·¹í•œ ìƒí™©ì—ì„œì˜ ì„œë¹„ìŠ¤ ë™ì‘ í™•ì¸
  - ì¥ê¸°ê°„ ë¶€í•˜ ë°œìƒì— ëŒ€í•œ í•œê³„ì¹˜ë¥¼ í™•ì¸í•˜ê³  ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
  - ìµœëŒ€ ì‚¬ìš©ì ë˜ëŠ” ìµœëŒ€ ì²˜ë¦¬ëŸ‰ì„ í™•ì¸
  - ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ ì´í›„ ì‹œìŠ¤í…œì´ ìˆ˜ë™ ê°œì…ì—†ì´ ë³µêµ¬ë˜ëŠ”ì§€ í™•ì¸
- http_req_duration
  - request ì‹œì‘ì „ ë¹ˆ TCP connection slotì„ ê¸°ë‹¤ë¦¬ë©´ì„œ blockedëœ ì‹œê°„
- http_req_blocked
  - ì´ request ì‹œê°„ `http_req_sending + http_req_waiting + http_req_receiving`ì™€ ê°™ë‹¤.
---



