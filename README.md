<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install
#### npm ì„¤ì¹˜
```
cd frontend
npm install
```
> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage
#### webpack server êµ¬ë™
```
npm run dev
```
#### application êµ¬ë™
```
./gradlew clean build
```
<br>

## ì„œë¹„ìŠ¤ ì§„ë‹¨í•˜ê¸° ê°•ì˜ ë‚´ìš© ê°„ë‹¨ ì •ë¦¬
> ì´ë²ˆ ë¯¸ì…˜ ëª©í‘œ
> 1. webpagetest, pagespeedë¥¼ í™œìš©í•˜ì—¬ _**ì›¹ ì„±ëŠ¥ ì˜ˆì‚° ê³ ë¯¼**_
> 2. ëª©í‘œì¹˜ë¥¼ ì •í•˜ê³  _**ë¶€í•˜ í…ŒìŠ¤íŠ¸**_ ë¥¼ ì§ì ‘ ìˆ˜í–‰
> 3. _**USE ë°©ë²•ë¡ **_ ì„ í™œìš©í•˜ì—¬ _**ì„œë²„ ì§„ë‹¨ & Thread ë¤í”„**_ ë¥¼ í™•ì¸ ê°€ëŠ¥

### ì›¹ ì„±ëŠ¥ ì§„ë‹¨í•˜ê¸°

#### ë¬¸ì œ ì¸ì‹) ì£¼ë¡œ _ì¸í„°ë„· êµ¬ê°„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸_ ë¥¼ _ì–´ë–¤ ê¸°ì¤€_ ìœ¼ë¡œ _ì–´ë–»ê²Œ_ _ë¬´ì—‡ì„_ ê°œì„  í•  ê²ƒ ì¸ê°€?

#### ì–´ë–»ê²Œ í™•ì¸?
- webpagetest, pagespeed ë“±ì˜ ë„êµ¬ë¥¼ í™œìš©

#### ë¬´ì—‡ì„ ê°œì„ ?
A) ì •ë‹µì€ ì—†ë‹¤ ; ì„œë¹„ìŠ¤ íŠ¹ì„±ë§ˆë‹¤ ë‹¤ë¥¸ ê¸°ì¤€ì„ ê°€ì§€ê³  ê°œì„   
í¬ê²Œ **ì •ëŸ‰** / **ì‹œê°„** / **ê·œì¹™** ê¸°ë°˜ìœ¼ë¡œ ì‚°ì •í•˜ì—¬ ê°œì„  ê°€ëŠ¥ í•˜ë‹¤.

- ì •ëŸ‰ ê¸°ë°˜(`Quantity Based Metric`) ì˜ˆì‹œ
  - ë©”ì¸ í˜ì´ì§€ì˜ ëª¨ë“  ì˜¤ë¸Œì íŠ¸ íŒŒì¼ í¬ê¸°ëŠ” `10mb ë¯¸ë§Œ`ìœ¼ë¡œ ì œí•œí•œë‹¤
  - ëª¨ë“  ì›¹ í˜ì´ì§€ì˜ ê° í˜ì´ì§€ ë‚´ í¬í•¨ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ í¬ê¸°ëŠ” `1mb ë¯¸ë§Œ` ì´ì–´ì•¼ í•œë‹¤.
  - ê²€ìƒ‰ í˜ì´ì§€ì—ëŠ” `2mb ë¯¸ë§Œ`ì˜ ì´ë¯¸ì§€ê°€ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ì‹œê°„ ê¸°ë°˜(`Timing Based Metric`) ì˜ˆì‹œ
  - LTE í™˜ê²½ì—ì„œì˜ ëª¨ë°”ì¼ ê¸°ê¸°ì˜ `TTI:Time To Interactive`ëŠ” `5ì´ˆ ë¯¸ë§Œ`ì´ì–´ì•¼ í•œë‹¤
  - `DCL:Dom Content Loaded`ëŠ” `10ì´ˆ`, `FMP: First Meaningful Paint`ëŠ” `15ì´ˆ ë¯¸ë§Œ`ì´ì–´ì•¼ í•œë‹¤
- ê·œì¹™ ê¸°ë°˜(`Rule Based Metric`) ì˜ˆì‹œ
  - Lighthouse ì„±ëŠ¥ ê²€ì‚¬ì—ì„œ `80ì  ì´ìƒ`ì´ì–´ì•¼ í•œë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ í™œìš©ë˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ê¸°ì¤€
- ì‚¬ìš©ì _**íŠ¸ë˜í”½ì´ ë§ì€ í˜ì´ì§€**_ , _**ê°€ì¥ ì¤‘ìš”í•œ í˜ì´ì§€**_ ê¸°ì¤€
    - ê²½ìŸì‚¬ ëŒ€ë¹„ 20% ì°¨ì´
    - 3ì´ˆ ì•ˆì— ë¡œë”©

> ì°¸ê³ )ì„±ëŠ¥ ê´€ë ¨ ìš©ì–´ë“¤ì˜ ì˜ë¯¸ íŒŒì•…
> - FCP(First Contentful Paint) : ê°€ì¥ ì²«ë²ˆì§¸ ìœ ì˜ë¯¸í•œ ì½˜í…ì¸ (í…ìŠ¤íŠ¸ or ì´ë¯¸ì§€)ê°€ í‘œì‹œë˜ëŠ” ì‹œê°„ 
> - LCP(Large Contentful Paint) : ìœ ì˜ë¯¸í•œ ì½˜í…ì¸ (í…ìŠ¤íŠ¸ or ì´ë¯¸ì§€) ì¤‘ ê°€ì¥ í° ì½˜í…ì¸ ê°€ í‘œì‹œë˜ëŠ” ì‹œê°„ 
> - TTI(Time To Interactive) : ì‚¬ìš©ìê°€ ì‚¬ì´íŠ¸ì™€ ì™„ì „íˆ ìƒí˜¸ì‘ìš© í•  ìˆ˜ ìˆì„ ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„
> - TBT(Total Blocking Time) : ìƒí˜¸ì‘ìš©ì´ ë¶ˆê°€ëŠ¥ í–ˆì„ ë•Œì˜ ì‹œê°„
> - CLS(Cumulative Layout Shift) : í‘œì‹œ ì˜ì—­ ì•ˆì— ë³´ì´ëŠ” ìš”ì†Œì˜ ì´ë™ì„ ì¸¡ì •
> - Speed Index : í˜ì´ì§€ì˜ ë³´ì´ëŠ” ë¶€ë¶„ì´ í‘œì‹œë˜ëŠ” í‰ê·  ì‹œê°„

#### ì„±ëŠ¥ ì˜ˆì‚° ì´ë€?
`ì˜ˆì‚°`ì´ë€ ë‹¨ì–´ ë•Œë¬¸ì— í—·ê°ˆë¦´ ì—¬ì§€ê°€ ìˆëŠ” ë¶€ë¶„ì´ ìˆìœ¼ë‚˜, ê¸ˆì „ì ì¸ê²ƒê³¼ëŠ” ì—°ê´€ ì—†ëŠ”  
**_ìˆœìˆ˜í•˜ê²Œ í˜ì´ì§€ì— ëŒ€í•œ ì´ˆê³¼í•  ìˆ˜ ì—†ëŠ” ì–´ë–¤ ê¸°ì¤€ì´ë‚˜ ì œí•œì„ ì˜ë¯¸_**

### ë¶€í•˜ í…ŒìŠ¤íŠ¸ í•˜ê¸°

#### ì‚¬ì „ ì§€ì‹
- ê°€ìš©ì„± : ì‚¬ìš©ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ì„±ì§ˆ  
  ì–´ë–¤ ì‹œìŠ¤í…œì´ **ìƒë‹¹íˆ ì˜¤ëœ ê¸°ê°„ ë™ì•ˆ ì§€ì†ì ìœ¼ë¡œ ì •ìƒ ìš´ì˜ì´ ê°€ëŠ¥í•œ ì„±ì§ˆ**,  
  ê³ ê°€ìš©ì„±ì´ë€ **ì ˆëŒ€ ê³ ì¥ ë‚˜ì§€ ì•ŠìŒ** ì´ë€ ë§ê³¼ ì§„ë°°ì—†ë‹¤.
  - uptime ë“±ì˜ ì§€í‘œë¡œ ì¸¡ì •ë¨
  - ë¶€í•˜ê°€ ë†’ì•„ì§€ë©´ ê°€ìš©ì„±ì€ ë‚®ì•„ì§(ì¥ì• ê°€ ë°œìƒí•  í™•ë¥ ì´ ë†’ê¸° ë•Œë¬¸ì—)
  - ê°€ìš©ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ë‹¨ì¼ì¥ì• ì (SPOF)ë¥¼ ì—†ì• ê³ , í™•ì¥ì„± ìˆëŠ” ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•¨

ë”°ë¼ì„œ, ê³ ê°€ìš©ì„± ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í•„ìš”ì¡°ê±´ìœ¼ë¡œ ë‹¤ì¤‘í™”ê°€ ë§ì´ ê±°ë¡ ë˜ê³¤ í•œë‹¤.
- ë‹¤ì¤‘í™” : ì¥ì• ê°€ ë°œìƒí•´ë„ ì˜ˆë¹„ ìš´ìš©ì¥ë¹„ë¡œ ì‹œìŠ¤í…œì˜ ê¸°ëŠ¥ì„ ê³„ì† í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒ(**ì¥ì• ë‚´ì„±**)
  - ë‹¨ì¼ì¥ì• ì (SPOF)ë¥¼ ì—†ì• ê³  ë¬´ì¤‘ë‹¨ / ê³ ê°€ìš©ì„± ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ í•„ìš”ì¡°ê±´. ë‹¤ë§Œ, ì‚¬ìš©ëŸ‰ì„ ê³ ë ¤í•˜ì—¬ ë‹¤ì¤‘í™” ì •ë„ë¥¼ ì •í•´ì•¼ í•¨
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„, Load Balancer, Network Device ë“±ë“± ëª¨ë“  ê²ƒì´ ë‹¤ì¤‘í™” ëŒ€ìƒ
    - Fail - Over : active - passive ê´€ê³„ (í•˜ë‚˜ë§Œ í™œì„±í™” ë˜ì–´ìˆë‹¤ê°€ ì£½ìœ¼ë©´ passive ê°€ active ë¡œ ì „í™˜)
    - Replication : master - slave í´ëŸ¬ìŠ¤í„°ë§

#### ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê´€ì  ì •ë¦¬
- ê³ ê°€ìš©ì„±, ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤ë¥¼ ì§€í–¥í•˜ëŠ”ë° ìˆì–´ í•µì‹¬ì€ ì‚¬ìš©ìê°€ ë‚©ë“í• ë§Œí•œ ìˆ˜ì¤€ì˜ ê°€ìš©ì„±ì„ ìœ ì§€í•˜ë˜, ë°°í¬ ì‚¬ì´í´ì„ ìœ ì§€í•˜ëŠ” ê²ƒ
- ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê¸°ì— ì•ì„œ ì˜ˆìƒë˜ëŠ” ìƒí™©ì„ í…ŒìŠ¤íŠ¸í•˜ì—¬, í˜„ì¬ ì‹œìŠ¤í…œì´ ì–´ëŠ ì •ë„ì˜ ë¶€í•˜ë¥¼ ê²¬ë”œ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ ,  
  í•œê³„ì¹˜ì—ì„œ ë³‘ëª©ì´ ìƒê¸°ëŠ” ì§€ì ì„ íŒŒì•…í•˜ê³  ì¥ì•  ì¡°ì¹˜ì™€ ë³µêµ¬ë¥¼ ì‚¬ì „ì— ê³„íš í•´ ë‘˜ í•„ìš”ê°€ ìˆìŒ  
  (ex : ì¸ê¸° ì½˜ì„œíŠ¸ ì˜ˆë§¤ ì˜¤í”ˆ ì „ ë¶€í•˜ í…ŒìŠ¤íŠ¸)
- ê²°êµ­ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì–´ëŠì •ë„ê¹Œì§€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ í•œê³„ë¥¼ ì˜ˆìƒí•˜ê³ , ê°€ìš©ì„±ì„ ì§€í‚¤ê¸° ìœ„í•´ ì ì • ìˆ˜ì¤€ì˜ ì„±ëŠ¥ì„ ì œê³µí•˜ëŠ”ê²ƒì´ ë¶€í•˜í…ŒìŠ¤íŠ¸ì˜ í•µì‹¬
  - Concurrent User : ì¼œë†“ê³  ì•„ë¬´ê²ƒë„ ì•ˆí•˜ëŠ” ì‚¬ìš©ì ; ì˜ˆë¹„ Active User
  - Active User : ì‹¤ì œ ì„œë²„ì— ë¶€í•˜ë¥¼ ì¼ìœ¼í‚¤ê³  ìˆëŠ” ì‚¬ìš©ì(íŠ¹íˆ ë¶€í•˜í…ŒìŠ¤íŠ¸ì—ì„œëŠ” `VUser` ë¼ê³  í•¨)
  - Concurrent : Active ì ì • ìˆ˜ì¤€ ìœ ì§€í•´ì•¼ í•¨

> ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê´€ë ¨ ìš©ì–´ ì •ë¦¬  
> - TPS(Transaction Per Second ; ì²˜ë¦¬ëŸ‰)
>   - ì„œë¹„ìŠ¤ ì²˜ë¦¬ ê±´ìˆ˜ / ì¸¡ì • ì‹œê°„
>   - ìš”ì²­ ì‚¬ìš©ì ìˆ˜ / í‰ê·  ì‘ë‹µì‹œê°„
>   - ë™ì‹œ ì‚¬ìš©ì ìˆ˜ / ì„œë¹„ìŠ¤ ìš”ì²­ ê°„ê²©  
> ![tps.png](images%2Fstep2%2Ftps.png)
>   - User : TPS ëŠ” ì¼ì •êµ¬ê°„ ë¹„ë¡€í•˜ë‹¤ê°€ íŠ¹ì • ì‹œì ì— ì¦ê°€í•˜ì§€ ì•ŠëŠ”ë‹¤.
>   - User : Time ì€ ì¼ì •êµ¬ê°„ ìœ ì§€ë˜ë‹¤ê°€ ì ì°¨ì ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤.
>   - TPS : Time ì€ ì¼ì •êµ¬ê°„ ì˜¤ë¥´ë‹¤ê°€ ë³€ê³¡ì ì— ì´ë¥´ê¸°ë„ í•œë‹¤.
>     - ì´ ë•Œ, ë¦¬ì†ŒìŠ¤ê°€ ëˆ„ìˆ˜ë˜ê³  ìˆëŠ” ê±´ ì•„ë‹Œì§€ ì˜ì‹¬
>   - TPS ëŠ” `Scale Out : ë¶„ì‚°ì²˜ë¦¬` í˜¹ì€ `Scale up : ë¦¬ì†ŒìŠ¤ ìŠ¤í™ì—…`ì„ í†µí•´ ì¦ê°€ ê°€ëŠ¥
>   - ë‹¨ìˆœíˆ ì‘ë‹µì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì¢…ë£Œì‹œí‚¤ì§€ ë§ê³ , TPS ë‚˜ DB Connection, CPU ë“±ì„ ì¢…í•©ì ìœ¼ë¡œ í™•ì¸í•˜ê³  ì¤‘ë‹¨í•´ì•¼ í•¨
> - Performance vs Scalability  
> ![scaling.png](images%2Fstep2%2Fscaling.png)
>   - ì„±ëŠ¥ì— ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—”, ë‹¨ì¼ ì‚¬ìš©ìì— ëŒ€í•œ ì‘ë‹µ ì†ë„ê°€ ëŠë ¤ì§„ë‹¤
>   - í™•ì¥ì„±ì— ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—”, ë‹¹ì¥ì€ ë‹¨ì¼ ì‚¬ìš©ìì—ê²ŒëŠ” ë¹ ë¥´ì§€ë§Œ ë¶€í•˜ê°€ ë§ì•„ì§ˆ ê²½ìš° ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤
> - ì‹œê°„
>   - ì‚¬ìš©ìì—ê²Œ ìˆì–´ì„œ Time ì€ ì‘ë‹µì‹œê°„ë§Œ ì¡´ì¬í•œë‹¤
>   - í•˜ì§€ë§Œ, ì‹¤ì œ ì‹œìŠ¤í…œ ì…ì¥ì—ì„  ì‚¬ìš©ìê°€ ì‘ë‹µë°›ì€ í›„ ë‹¤ìŒ ìš”ì²­ ì „ê¹Œì§€ ì›¹í˜ì´ì§€ë¥¼ ë³´ê³  í™œìš©í•˜ëŠ” ë“±ì˜ ì‹œê°„ì´ ì¡´ì¬í•œë‹¤(Think time)  
>   ![think-time.png](images%2Fstep2%2Fthink-time.png)
>   - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì—” ì‹¤ì œ ì§€ì—°ì‹œê°„ì´ ë°œìƒí•˜ëŠ” êµ¬ê°„ì„ íŒŒì•…í•´ì•¼ í•œë‹¤.
>     - ìƒìœ„ 5%ì˜ í™”ë©´ì´ 95% ì‚¬ìš©ì ìš”ì²­ì„ ë°›ëŠ”ë‹¤. --> íŠœë‹ì˜ ëŒ€ìƒì„ ë©´ë°€íˆ ê²€í† í•˜ì—¬ ì„ ë³„í•´ì•¼ í•œë‹¤.
>     - ë”°ë¼ì„œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì—” `Scale Out` ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ì‘ë‹µì‹œê°„ ë˜í•œ ì¤‘ìš”í•˜ë‹¤ 

#### ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì¢…ë¥˜
- Smoke Test<sup>[1](#footnote_1)</sup>
  - ìµœì†Œí•œì˜ ë¶€í•˜ë¡œ êµ¬ì„±ëœ í…ŒìŠ¤íŠ¸, í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— ì˜¤ë¥˜ê°€ ì—†ëŠ” ì§€ í™•ì¸ ê°€ëŠ¥
  - VUser : 1 ~ 2 ë¡œ êµ¬ì„±
- Load Test
  - ì„œë¹„ìŠ¤ì˜ í‰ì†Œ íŠ¸ë˜í”½ê³¼ ìµœëŒ€ íŠ¸ë˜í”½ ìƒí™©ì—ì„œ ì„±ëŠ¥ì´ ì–´ë–¤ ì§€ í™•ì¸
  - ì´ ë•Œ ê¸°ëŠ¥ì˜ ì •ìƒ ë™ì‘ ì—¬ë¶€ë„ í™•ì¸
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì¸í”„ë¼ ë³€ê²½ (scale out, DB failover ë“±)ì‹œì— ì„±ëŠ¥ ë³€í™”ë¥¼ í™•ì¸
  - ì™¸ë¶€ ìš”ì¸(ê²°ì œ ë“±)ì— ë”°ë¥¸ ì˜ˆì™¸ ìƒí™©ì„ í™•ì¸
- Stress Test
  - ê·¹í•œ ìƒí™©ì—ì„œì˜ ë™ì‘ í…ŒìŠ¤íŠ¸
  - ì¥ê¸°ê°„ ë¶€í•˜ ë°œìƒì— ëŒ€í•œ í•œê³„ì¹˜ í™•ì¸ ë° ê¸°ëŠ¥ ì •ìƒ ë™ì‘ ì—¬ë¶€ í™•ì¸
  - ìµœëŒ€ ì‚¬ìš©ì ë˜ëŠ” ìµœëŒ€ ì²˜ë¦¬ëŸ‰ì„ í™•ì¸
  - ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ ì´í›„ ì‹œìŠ¤í…œì´ ìˆ˜ë™ ê°œì… ì—†ì´ ë³µêµ¬ë˜ëŠ” ì§€ í™•ì¸

### ì„œë²„ ì§„ë‹¨í•˜ê¸°
### ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ë‹¨í•˜ê¸°

### 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”  
- ê²½ìŸì‚¬ ì„œë¹„ìŠ¤ ëŒ€ë¹„ ì‚¬ìš©ìê°€ **_ì„±ëŠ¥ì°¨ì´_** ë¥¼ ëŠë¼ì§€ ì•Šì„ ì •ë„ë¡œ ì˜ˆì‚°ì„ ì¡ì•„ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤
   - ì‚¬ìš©ìëŠ” ì‘ë‹µì‹œê°„ì´ ê²½ìŸì‚¬ ëŒ€ë¹„ 20% ì´ìƒ ì°¨ì´ê°€ ë‚˜ë©´ ì„±ëŠ¥ì°¨ì´ë¥¼ ì²´ê°í•©ë‹ˆë‹¤.  

- ë”°ë¼ì„œ, ìµœì†Œí•œ ê²½ìŸì‚¬ ëŒ€ë¹„ 20% ì´ìƒ ì°¨ì´ê°€ ë‚˜ì§€ ì•Šë„ë¡ ê°œì„ í•´ì•¼í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì¡ì•„ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

- ë˜í•œ, ê²½ìŸì‚¬ ì¤‘ ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ì€ ì„œë¹„ìŠ¤ ëŒ€ë¹„í•˜ì—¬ 20%ë¥¼ ëª©í‘œë¡œ ì¡ì•„ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.  
  - ì„ì˜ì˜ ê²½ìŸì‚¬ A, Bê°€ ìˆê³  Aê°€ ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ë‹¤ ë¼ê³  ê°€ì •í•´ë³¸ë‹¤ë©´,
  - Bê°€ ì„±ëŠ¥ì˜ˆì‚°ì„ ì¡ì„ ë•Œ, Aì˜ ì„œë¹„ìŠ¤ ì„±ëŠ¥ ëŒ€ë¹„í•˜ì—¬ 20%ë¡œ ì¡ì•˜ë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.
  - ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ëŠ” Bì˜ ì„±ëŠ¥ì„ ëŒ€ë¹„í•˜ì—¬ 20%ë¡œ ì„±ëŠ¥ì˜ˆì‚°ì„ ì¡ìœ¼ë©´
  - ê²°êµ­, ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ì€ Aì˜ ì„œë¹„ìŠ¤ ëŒ€ë¹„ 44%ì˜ ì„±ëŠ¥ì°¨ì´ ë‚´ì—ì„œ ì˜ˆì‚°ì„ ì¡ì€ê²ƒì´ ë©ë‹ˆë‹¤(ì´ë¡ ì ìœ¼ë¡œ)  
  **_ë”°ë¼ì„œ, ê²½ìŸì‚¬ ì¤‘ ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ì€ ì„œë¹„ìŠ¤ ëŒ€ë¹„í•˜ì—¬ 20%ë¥¼ ëª©í‘œë¡œ ì¡ì•„ì•¼ í•©ë‹ˆë‹¤_**

2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ì˜ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”.
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í˜ì´ì§€ëŠ” ë‹¤ìŒ ë‘ í˜ì´ì§€ ì…ë‹ˆë‹¤.
  - ë©”ì¸ í˜ì´ì§€(ì„œë¹„ìŠ¤ ìµœì´ˆ ì ‘ê·¼ í™”ë©´)
  - ê²½ë¡œ ì°¾ê¸° ì„œë¹„ìŠ¤(ì‚¬ìš©ìê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©í•  ê²ƒ ê°™ì€ ê¸°ëŠ¥)
    - ì¹´ì¹´ì˜¤ë§µì€ ë‚´ë¶€ sidebar íƒ­ìœ¼ë¡œ ê¸¸ì°¾ê¸° ê¸°ëŠ¥ì´ ë‚´ì¥ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë©”ì¸í˜ì´ì§€ì™€ ê²°ê³¼ê°€ ë™ì¼í•©ë‹ˆë‹¤.  
      (ë©”ì¸í˜ì´ì§€ì™€ ê¸¸ì°¾ê¸° URI ë¶„ë¦¬ê°€ ì•ˆë¨)

- ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ì€ ì„œë¹„ìŠ¤ ëŒ€ë¹„ 20% ì´ë‚´ë¡œ ì„±ëŠ¥ì˜ˆì‚° ëª©í‘œë¡œ ì¡ì•˜ìŠµë‹ˆë‹¤.
  - ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ ê¸°ì¤€ì„ ì¡ì•˜ìŠµë‹ˆë‹¤. 
    - ì„±ëŠ¥ ì¢…í•©, CLSëŠ” ì‹œê°„ê³¼ ì—°ê´€ìˆëŠ” ìˆ˜ì¹˜ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì˜ˆì‚° ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤.
    - TBTëŠ” ì„±ëŠ¥ì˜ ê°œì„ ê³¼ëŠ” ë‹¤ì†Œ ì—°ê´€ì„±ì´ ë‚®ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì˜ˆì‚°ì—” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
    (ê°ê°ì˜ ìˆ˜ì¹˜ê°€ í¸ì°¨ê°€ í¬ì§€ ì•Šë‹¤ë©´ TBTëŠ” ê·¸ ê°’ì´ ì‘ì•„ì§)
  - ìì„¸í•œ ëª©í‘œ ìˆ˜ì¹˜ëŠ” ì•„ë˜ ê¸°ëŠ¥ëª©ë¡ì—ì„œ ìƒì„¸í•˜ê²Œ ê¸°ìˆ í•˜ê² ìŠµë‹ˆë‹¤.

#### 1ë‹¨ê³„ ê¸°ëŠ¥ ëª©ë¡
- [x] AWSì— ì„œë²„ ë„ìš°ê¸°(ì—°ê³„ë˜ëŠ” ë¯¸ì…˜ì´ ìˆëŠ” ì¤„ ëª¨ë¥´ê³  ì„¸ë¯¸ ë³´ì´ìŠ¤ì¹´ì›ƒ ê·œì¹™ ì ìš©(ì§€ìš¸ìˆ˜ ìˆëŠ” ë§Œí¼ ì§€ìš°ê¸°))
  - [x] í˜„ì¬ ì†ŒìŠ¤ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ìš´ì˜ í™˜ê²½ êµ¬ì„±(í™˜ê²½ì„¤ì • íŒŒì¼ ë¶„ë¦¬, ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì ìš© ë“±ë“±..)
- [x] ê²½ìŸì‚¬ / RunningMap ì„±ëŠ¥ í…ŒìŠ¤íŠ¸([pagespeed](https://pagespeed.web.dev/) ë¡œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì§„í–‰) 
- ë©”ì¸í˜ì´ì§€ (ëª¨ë°”ì¼)

|            | FCP          | TTI          | Speed Index  | TBT    | LCP          | CLS   | ì„±ëŠ¥ ì¢…í•© |
|------------|--------------|--------------|--------------|--------|--------------|-------|-------|
| ì„œìš¸êµí†µê³µì‚¬     | 7.2 s        | 11.6 s       | 8.2 s        | 630 ms | 14.7 s       | 0.04  | 33    |
| ë„¤ì´ë²„ì§€ë„      | 2.2 s        | 6.6 s        | **_7.2 s_**  | 240 ms | 10.7 s       | 0.17  | 57    |
| ì¹´ì¹´ì˜¤ë§µ       | **_1.7 s_**  | **_4.6 s_**  | 8.3 s        | 90 ms  | **_6.8 s_**  | 0.005 | 66    | 
| RunningMap | 15.0 s       | 15.5 s       | 15.0 s       | 480 ms | 15.5 s       | 0.042 | 33    |
| Target     | ~ **2.04 s** | ~ **5.52 s** | ~ **8.64 s** | -      | ~ **8.16 s** | -     | -     |

- ë©”ì¸í˜ì´ì§€ (ë°ìŠ¤í¬íƒ‘)

|            | FCP          | TTI          | Speed Index  | TBT    | LCP         | CLS   | ì„±ëŠ¥ ì¢…í•© |
|------------|--------------|--------------|--------------|--------|-------------|-------|-------|
| ì„œìš¸êµí†µê³µì‚¬     | 1.7 s        | **_2.3 s_**  | **_2.2 s_**  | 40 ms  | 4.7 s       | 0.232 | 60    |
| ë„¤ì´ë²„ì§€ë„      | **_0.3 s_**  | 3.0 s        | 2.9 s        | 260 ms | 4.1 s       | 0.032 | 60    |
| ì¹´ì¹´ì˜¤ë§µ       | 0.6 s        | 2.6 s        | 2.8 s        | 780 ms | 0.8 s       | 0.017 | 65    |
| RunningMap | 2.7 s        | 2.8 s        | 2.7 s        | 60 ms  | **_2.8 s_** | 0.004 | 68    |
| Target     | ~ **0.36 s** | ~ **2.76 s** | ~ **2.64 s** | -      | **2.8 s**   | -     | -     |

- ê²½ë¡œíƒìƒ‰ í˜ì´ì§€ (ëª¨ë°”ì¼)

|            | FCP          | TTI          | Speed Index  | TBT      | LCP          | CLS   | ì„±ëŠ¥ ì¢…í•© |
|------------|--------------|--------------|--------------|----------|--------------|-------|-------|
| ì„œìš¸êµí†µê³µì‚¬     | 6.4 s        | 8.6 s        | 8.1 s        | 1,610 ms | 7.3 s        | 0     | 26    |
| ë„¤ì´ë²„ì§€ë„      | 2.2 s        | **_2.4 s_**  | **_3.1 s_**  | 20 ms    | **_3.7s_**   | 0     | 86    |
| ì¹´ì¹´ì˜¤ë§µ       | **_1.7 s_**  | 4.6 s        | 8.3 s        | 90 ms    | 6.8 s        | 0.005 | 66    |
| RunningMap | 16.4 s       | 16.9 s       | 16.4 s       | 70ms     | 16.4 s       | 0     | 45    |
| Target     | ~ **2.04 s** | ~ **2.88 s** | ~ **3.72 s** | -        | ~ **4.44 s** | -     | -     |

- ê²½ë¡œíƒìƒ‰ í˜ì´ì§€ (ë°ìŠ¤í¬íƒ‘)

|            | FCP         | TTI         | Speed Index  | TBT    | LCP          | CLS   | ì„±ëŠ¥ ì¢…í•© |
|------------|-------------|-------------|--------------|--------|--------------|-------|-------|
| ì„œìš¸êµí†µê³µì‚¬     | 1.5 s       | **_2.0 s_** | **_2.1 s_**  | 210 ms | 2.6 s        | 0.001 | 70    |
| ë„¤ì´ë²„ì§€ë„      | **_0.5 s_** | 3.2 s       | 2.8 s        | 450 ms | 2.6 s        | 0.008 | 57    |
| ì¹´ì¹´ì˜¤ë§µ       | 0.6 s       | 2.6 s       | 2.8 s        | 780 ms | **_0.8 s_**  | 0.017 | 65    |
| RunningMap | 3.0 s       | 3.1 s       | 3.0 s        | 0 ms   | 3.0 s        | 0     | 64    |
| Target     | ~ **0.6 s** | ~ **2.4 s** | ~ **2.52 s** | -      | ~ **0.96 s** | -     | -     |

- [x] ì„±ëŠ¥ ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆëŠ” ë¶€ë¶„ íŒŒì•…
  - RunningMap ì„œë¹„ìŠ¤ëŠ” ëŒ€ì±„ë¡œ ë„¤íŠ¸ì›Œí¬ í˜ì´ë¡œë“œê°€ ì»¤ì„œ ê° ì‹œê°„ ìˆ˜ì¹˜ì—ì„œ ì¢‹ì€ ì„±ëŠ¥ì„ ë‚´ì§€ ëª»í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
![runningmap-ì„±ëŠ¥ê°œì„ ì .png](images%2Fstep1%2Frunningmap-%EC%84%B1%EB%8A%A5%EA%B0%9C%EC%84%A0%EC%A0%90.png)
  - ë”°ë¼ì„œ, ì•ˆë‚´ë˜ì–´ ìˆëŠ” ë‚´ìš© ëŒ€ë¡œ gzip ì••ì¶•ë“±ì˜ ë°©ë²•ì„ í†µí•´ ì„±ëŠ¥ì˜ˆì‚° ëª©í‘œë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•´ ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

#### 1ë‹¨ê³„ í”¼ë“œë°±
- cdn ì„œë²„ ì ìš©ìœ¼ë¡œë„ ì„±ëŠ¥ê°œì„  ì—¬ì§€ê°€ ìˆìŒ

> CDN(Content Delivery Network) ì„œë²„ë€?  
> í•œë§ˆë””ë¡œ ë§í•˜ë©´, **ìºì‹œ ì„œë²„ì˜ ì¼ì¢…**ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.  
> ìµœê·¼ ì½˜í…ì¸ ëŠ” ë³€ë™ë  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ì ë‹¤(netflexì˜ ì˜ìƒ, ê²Œì„ì˜ ë¦¬ì†ŒìŠ¤ ë“±ë“±..)  
> ì´ëŸ° ì½˜í…ì¸ ëŠ” ìºì‹±í•˜ì—¬ Content ìš”ì²­ì‹œì— CDN ì„œë¹„ìŠ¤ ë“±ì„ í†µí•´ ì‘ë‹µí•˜ëŠ” ê²ƒì´  
> ì„±ëŠ¥ì ì¸ ì¸¡ë©´ì—ì„œ í›¨ì”¬ ì´ì ì´ ë§ë‹¤.

---

### 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸
---- ----
#### ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ì€ ì–´ëŠì •ë„ë¡œ ì„¤ì •í•˜ì…¨ë‚˜ìš”
##### ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„ ì„ ì •

ì§€í•˜ì²  ë…¸ì„ ë„ ì•±ì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë°”ë¡œ `ë…¸ì„  ì¡°íšŒ` ì…ë‹ˆë‹¤.
ë”°ë¼ì„œ íƒ€ê²Ÿ ì‹œìŠ¤í…œ ë²”ìœ„ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
- `ë©”ì¸ í˜ì´ì§€` : ë…¸ì„ ë„ ì‹œìŠ¤í…œ ìµœì´ˆ ì ‘ê·¼ í™”ë©´
- `ë…¸ì„  ì¡°íšŒ` : ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë° ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€

##### ëª©í‘¯ê°’ ì„¤ì •  
ê°€ì´ë“œ ë°ì´í„°ì— ëŒ€í•´ ì¡°ì‚¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.  
- [2021ë…„ 1ì›” ë„ì‹œì² ë„ì—¬ê°ìˆ˜ì†¡ - ê¸°ê´€ë³„ ìŠ¹ê°•ì°¨ì‹¤ì ](http://www.kric.go.kr/jsp/industry/rss/cityorganpassList.jsp?q_fdate=2021)

| 2021    | 1ì›”          |
|---------|-------------|
| ìŠ¹ì°¨ì¸ì›(ëª…) | 136,963,409 |
| í•˜ì°¨ì¸ì›(ëª…) | 131,882,716 |

- [2021ë…„ 1ì›” ë„ì‹œì² ë„ì—¬ê°ìˆ˜ì†¡ - ì‹œê°„ëŒ€ë³„ ìˆ˜ì†¡ì‹¤ì ](http://www.kric.go.kr/jsp/industry/rss/citytimepassList.jsp?q_fdate=2021&q_month=1)  

| ì‹œê°„êµ¬ë¶„/ê¸°ê´€     | ìŠ¹ì°¨ì¸ì›(ëª…)     | í•˜ì°¨ì¸ì›(ëª…)    | ì‹œê°„êµ¬ë¶„/ê¸°ê´€     | ìŠ¹ì°¨ì¸ì›(ëª…)    | í•˜ì°¨ì¸ì›(ëª…)     |     
|-------------|-------------|------------|-------------|------------|-------------|     
| 00 ~ 01 ì‹œê°„ëŒ€ | 19,787  	   | 137,784    | 12 ~ 13 ì‹œê°„ëŒ€ | 6,215,370  | 5,861,232   |     
| 01 ~ 02 ì‹œê°„ëŒ€ | 1,631   	   | 2,575      | 13 ~ 14 ì‹œê°„ëŒ€ | 6,670,464  | 6,508,224   |     
| 02 ~ 03 ì‹œê°„ëŒ€ | 661	        | 1,368      | 14 ~ 15 ì‹œê°„ëŒ€ | 6,869,426  | 	6,560,438  |     
| 03 ~ 04 ì‹œê°„ëŒ€ | 258	        | 357        | 15 ~ 16 ì‹œê°„ëŒ€ | 7,432,874  | 	6,838,711  |     
| 04 ~ 05 ì‹œê°„ëŒ€ | **36,707**	     | **5,950**      | 16 ~ 17 ì‹œê°„ëŒ€ | 8,322,306  | 	7,274,110  |     
| 05 ~ 06 ì‹œê°„ëŒ€ | 1,751,348	  | 505,119    | 17 ~ 18 ì‹œê°„ëŒ€ | 11,243,652 | 	8,842,101  |     
| 06 ~ 07 ì‹œê°„ëŒ€ | 3,589,608	  | 2,604,302  | 18 ~ 19 ì‹œê°„ëŒ€ | **15,021,049** | 	**12,723,067** |     
| 07 ~ 08 ì‹œê°„ëŒ€ | 9,238,520	  | 5,909,965  | 19 ~ 20 ì‹œê°„ëŒ€ | 7,547,150  | 	9,167,473  |     
| 08 ~ 09 ì‹œê°„ëŒ€ | **12,171,172**	 | **14,730,619** | 20 ~ 21 ì‹œê°„ëŒ€ | 6,379,369  | 	5,513,240  |     
| 09 ~ 10 ì‹œê°„ëŒ€ | 7,240,449	  | 9,525,133  | 21 ~ 22 ì‹œê°„ëŒ€ | 6,051,588  | 	6,223,248  |     
| 10 ~ 11 ì‹œê°„ëŒ€ | 5,515,588	  | 6,048,477  | 22 ~ 23 ì‹œê°„ëŒ€ | 2,114,058  | 	2,945,234  |     
| 11 ~ 12 ì‹œê°„ëŒ€ | 5,641,178	  | 5,575,680  | 23 ~ 00 ì‹œê°„ëŒ€ | 674,884	   | 1,340,31    |     

ëª¨ë“  ê¸°ê´€ì˜ 2021ë…„ ê¸°ì¤€ 1ì›”ì˜ ìŠ¹/í•˜ì°¨ ì¸ì›ì€ ì´ `268,846,125` ëŒ€ëµ `2ì–µ 6ì²œ ëª…` ì •ë„ ì…ë‹ˆë‹¤.  
ì¼ë³„ë¡œ í™˜ì‚°í•˜ë©´ `8,672,455` ëª…ìœ¼ë¡œ ëŒ€ëµ `860ë§Œëª…` ì…ë‹ˆë‹¤.

ë˜í•œ, ì›” ê¸°ì¤€ì˜ ì‹œê°„ëŒ€ë³„ ìŠ¹ì°¨ì¸ì›ì„ ë¹„êµí•´ë³´ë©´
- ìƒˆë²½ì‹œê°„(04ì‹œ ê²½) : `3ë§Œëª…`
- í”¼í¬ì‹œê°„(ì¶œí‡´ê·¼) : `1200ë§Œëª…` ~ `1500ë§Œëª…` 
- í‰ê·  : `5,406,212` = `540ë§Œëª…`

ë”°ë¼ì„œ, ì‹œìŠ¤í…œ ì‚¬ìš©ìë¥¼ ì˜ˆì¸¡í•´ë³´ë©´
- í•˜ë£¨ ì§€í•˜ì²  ì‚¬ìš©ì : ì•½ 400ë§Œëª…(ìŠ¹ / í•˜ì°¨ ê°ê° ê¸°ì¤€)
- ì–´í”Œì„ ì‚¬ìš©í•˜ëŠ” ì§€í•˜ì²  ì‚¬ìš©ìëŠ” ì´ ì¤‘ ì•½ 3/4ë¡œ ê°€ì • : ì•½ 300ë§Œëª…
- ì´ ì¤‘ 1/3ì´ `RunningMap`ì„ ì‚¬ìš©í•  ê²ƒì´ë¼ê³  ê°€ì • : 300ë§Œ / 3 = `100ë§Œëª…`
- 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜ëŠ” [ëŒ€ëµ 2ë²ˆ(ë„¤ì´ë²„ ì§€ë„ ì¼ì¼ ì‚¬ìš©ì ê¸°ì‚¬ ì°¸ê³ )](https://news.mt.co.kr/mtview.php?no=2021090916014079809)

ìœ„ì™€ ê°™ì€ ê¸°ì¤€ìœ¼ë¡œ ëª©í‘¯ê°’ì„ ì„¤ì •í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
##### Throughput : 1ì¼ í‰ê·  rps ~ 1ì¼ ìµœëŒ€ rps
- 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU) * 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜ = 1ì¼ ì´ ì ‘ì† ìˆ˜
  - 100ë§Œ * 2 = 200ë§Œ
- 1ì¼ ì´ ì ‘ì† ìˆ˜ / 86,400 (ì´ˆ/ì¼) = 1ì¼ í‰ê·  rps
  - 2,000,000 / 86,400 = `23.14`
- 1ì¼ í‰ê·  rps * (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½) = 1ì¼ ìµœëŒ€ rps
  - 23.14 * (15,000,000 / 5,400,000) = `64.27`
- 23 ~ 64 rps ë¡œ ì¶”ì •

##### Latency
ì¼ë°˜ì ìœ¼ë¡œ 50 ~ 100 ms ì´í•˜ë¡œ ì„¤ì •

##### VUser ì„¤ì •
- T = (R * http_req_duration) (+ 1s(latency)) ; ë‚´ë¶€ë§ì—ì„œ í…ŒìŠ¤íŠ¸í•  ê²½ìš° ì˜ˆìƒ latencyë¥¼ ì¶”ê°€
  - (2íšŒ ìš”ì²­ * 0.5 s) + 1s(latency) = 2 s
- í‰ê·  VUser = 23 * 2 / 2 = 23
- ìµœëŒ€ VUser = 64 * 2 / 2 = 64 

##### ìµœì¢… ëª©í‘œ ì„¤ì •

| ë¶€í•˜í…ŒìŠ¤íŠ¸ ì¢…ë¥˜ | VUser(ëª…) | ramp-up(s) | ë¶€í•˜ ìœ ì§€ ì‹œê°„(s) | ramp-down(s) | threshold(ms) |
|----------|----------|------------|-------------|--------------|---------------|
| smoke    | 2        | 1          | 5           | 1            | 1500          |
| load     | 64       | 10         | 300         | 10           | 1000          |
| stress   | 180      | 5          | 10          | 5            | 1000          |

-----
#### Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”
> ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤
> - ì ‘ì† ë¹ˆë„ê°€ ë†’ì€ í˜ì´ì§€ : í™ˆí˜ì´ì§€
> - ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ”ë° ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€ : ë…¸ì„  ì¡°íšŒ

##### í™ˆí˜ì´ì§€ ë¶€í•˜í…ŒìŠ¤íŠ¸
- Smoke Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
threshold: {
  http_req_duration: ['p(99)<1500'],
},
stages: [
    {duration: '1s', target: 2},
    {duration: '5s', target: 2},
    {duration: '1s', target: 0},
  ],
};

const BASE_URL = 'https://yomni-subway.kro.kr/';

export default function () {

    const mainRes = http.get(`${BASE_URL}`);

    check(mainRes, {
      'is success': (r) => r.status === 200,
    });
}
```
```shell
# result
execution: local
 script: smoke_main.js
 output: InfluxDBv1 (http://localhost:8086)

scenarios: (100.00%) 1 scenario, 2 max VUs, 37s max duration (incl. graceful stop):
         * default: Up to 2 looping VUs for 7s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)


running (07.0s), 0/2 VUs, 4071 complete and 0 interrupted iterations
default âœ“ [======================================] 0/2 VUs  7s

   âœ“ is success

   checks.........................: 100.00% âœ“ 4071       âœ— 0
   data_received..................: 5.1 MB  734 kB/s
   data_sent......................: 466 kB  67 kB/s
   http_req_blocked...............: avg=12.64Âµs min=1.04Âµs  med=1.91Âµs  max=24.25ms  p(90)=2.91Âµs  p(95)=3.53Âµs
   http_req_connecting............: avg=847ns   min=0s      med=0s      max=776.45Âµs p(90)=0s      p(95)=0s
   http_req_duration..............: avg=2.96ms  min=2.53ms  med=2.75ms  max=31.57ms  p(90)=3.02ms  p(95)=3.71ms
     { expected_response:true }...: avg=2.96ms  min=2.53ms  med=2.75ms  max=31.57ms  p(90)=3.02ms  p(95)=3.71ms
   http_req_failed................: 0.00%   âœ“ 0          âœ— 4071
   http_req_receiving.............: avg=56.15Âµs min=16.27Âµs med=39.09Âµs max=28.76ms  p(90)=65.66Âµs p(95)=77.8Âµs
   http_req_sending...............: avg=13.05Âµs min=5.08Âµs  med=8.12Âµs  max=3.44ms   p(90)=16.48Âµs p(95)=24.81Âµs
   http_req_tls_handshaking.......: avg=6.72Âµs  min=0s      med=0s      max=14.77ms  p(90)=0s      p(95)=0s
   http_req_waiting...............: avg=2.89ms  min=2.49ms  med=2.7ms   max=22.77ms  p(90)=2.96ms  p(95)=3.58ms
   http_reqs......................: 4071    581.379094/s
   iteration_duration.............: avg=3.06ms  min=2.6ms   med=2.83ms  max=31.72ms  p(90)=3.14ms  p(95)=3.88ms
   iterations.....................: 4071    581.379094/s
   vus............................: 1       min=1        max=2
   vus_max........................: 2       min=2        max=2
```

- Load Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
  threshold: {
    http_req_duration: ['p(99)<1000'],
  },
  stages: [
      {duration: '10s', target: 23},
      {duration: '300s', target: 64},
      {duration: '10s', target: 0},
    ],
  };

const BASE_URL = 'https://yomni-subway.kro.kr/';

export default function () {

    const mainRes = http.get(`${BASE_URL}`);

    check(mainRes, {
        'is success': (r) => r.status === 200,
    });
}
```
```shell
execution: local
 script: load_main.js
 output: InfluxDBv1 (http://localhost:8086)

scenarios: (100.00%) 1 scenario, 64 max VUs, 5m50s max duration (incl. graceful stop):
         * default: Up to 64 looping VUs for 5m20s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)

running (5m20.0s), 00/64 VUs, 387737 complete and 0 interrupted iterations
default âœ“ [======================================] 00/64 VUs  5m20s

   âœ“ is success

   checks.........................: 100.00% âœ“ 387737      âœ— 0
   data_received..................: 489 MB  1.5 MB/s
   data_sent......................: 44 MB   139 kB/s
   http_req_blocked...............: avg=63.49Âµs  min=967ns   med=2.4Âµs   max=170.02ms p(90)=4.04Âµs   p(95)=9.01Âµs
   http_req_connecting............: avg=8.03Âµs   min=0s      med=0s      max=59.32ms  p(90)=0s       p(95)=0s
   http_req_duration..............: avg=34.08ms  min=2.58ms  med=21.05ms max=507.75ms p(90)=79.73ms  p(95)=98.82ms
     { expected_response:true }...: avg=34.08ms  min=2.58ms  med=21.05ms max=507.75ms p(90)=79.73ms  p(95)=98.82ms
   http_req_failed................: 0.00%   âœ“ 0           âœ— 387737
   http_req_receiving.............: avg=167.64Âµs min=15.54Âµs med=39.99Âµs max=71.28ms  p(90)=155.72Âµs p(95)=381.75Âµs
   http_req_sending...............: avg=65.85Âµs  min=4.83Âµs  med=11.26Âµs max=60.38ms  p(90)=36.35Âµs  p(95)=108.68Âµs
   http_req_tls_handshaking.......: avg=48.28Âµs  min=0s      med=0s      max=169.15ms p(90)=0s       p(95)=0s
   http_req_waiting...............: avg=33.84ms  min=2.54ms  med=20.77ms max=507.71ms p(90)=79.58ms  p(95)=98.68ms
   http_reqs......................: 387737  1211.666982/s
   iteration_duration.............: avg=34.38ms  min=2.67ms  med=21.35ms max=538.88ms p(90)=80.05ms  p(95)=99.2ms
   iterations.....................: 387737  1211.666982/s
   vus............................: 1       min=1         max=63
   vus_max........................: 64      min=64        max=64
```
- Stress Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
    threshold: {
        http_req_duration: ['p(99)<1000'],
    },
    stages: [
        {duration: '5s', target: 23},
        {duration: '10s', target: 180},
        {duration: '5s', target: 0},
    ],
};

const BASE_URL = 'https://yomni-subway.kro.kr/';

export default function () {

    const mainRes = http.get(`${BASE_URL}`);

    check(mainRes, {
        'is success': (r) => r.status === 200,
    });
}
```
```shell
execution: local
   script: stress_main.js
   output: InfluxDBv1 (http://localhost:8086)

scenarios: (100.00%) 1 scenario, 180 max VUs, 50s max duration (incl. graceful stop):
         * default: Up to 180 looping VUs for 20s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)

running (20.0s), 000/180 VUs, 37120 complete and 0 interrupted iterations
default âœ“ [======================================] 000/180 VUs  20s

     âœ“ is success

     checks.........................: 100.00% âœ“ 37120       âœ— 0
     data_received..................: 47 MB   2.4 MB/s
     data_sent......................: 4.3 MB  215 kB/s
     http_req_blocked...............: avg=531.86Âµs min=1.02Âµs  med=2.57Âµs  max=305.71ms p(90)=4.51Âµs   p(95)=10.23Âµs
     http_req_connecting............: avg=169.93Âµs min=0s      med=0s      max=119.78ms p(90)=0s       p(95)=0s
     http_req_duration..............: avg=40.65ms  min=2.59ms  med=28.58ms max=677.79ms p(90)=80.6ms   p(95)=106.4ms
       { expected_response:true }...: avg=40.65ms  min=2.59ms  med=28.58ms max=677.79ms p(90)=80.6ms   p(95)=106.4ms
     http_req_failed................: 0.00%   âœ“ 0           âœ— 37120
     http_req_receiving.............: avg=367.15Âµs min=14.94Âµs med=40.37Âµs max=112.9ms  p(90)=189.79Âµs p(95)=456.49Âµs
     http_req_sending...............: avg=189.11Âµs min=4.73Âµs  med=11.58Âµs max=139.53ms p(90)=43.97Âµs  p(95)=155.71Âµs
     http_req_tls_handshaking.......: avg=352.15Âµs min=0s      med=0s      max=214.7ms  p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=40.09ms  min=2.54ms  med=28.21ms max=677.67ms p(90)=79.33ms  p(95)=104.06ms
     http_reqs......................: 37120   1855.634676/s
     iteration_duration.............: avg=41.44ms  min=2.66ms  med=28.95ms max=677.9ms  p(90)=81.66ms  p(95)=110.42ms
     iterations.....................: 37120   1855.634676/s
     vus............................: 5       min=4         max=178
     vus_max........................: 180     min=180       max=180
```

----------------------------
##### ë…¸ì„ ì¡°íšŒ ë¶€í•˜í…ŒìŠ¤íŠ¸
- Smoke Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
    threshold: {
        http_req_duration: ['p(99)<1500'],
    },
    stages: [
        {duration: '1s', target: 2},
        {duration: '5s', target: 2},
        {duration: '1s', target: 0},
    ],
};

const BASE_URL = 'https://yomni-subway.kro.kr';
const SOURCE_STATION_ID = 1;
const TARGET_STATION_ID = 6;
// 27ê°œì—­ í†µê³¼ ê²½ë¡œ ì¡°íšŒ

export default function () {

    const pathRes = http.get(
        `${BASE_URL}/paths?source=${SOURCE_STATION_ID}&target=${TARGET_STATION_ID}`);

    check(pathRes, {
        'is success': (r) => r.status === 200,
    });
}
```
```shell
  execution: local
     script: smoke_path.js
     output: InfluxDBv1 (http://localhost:8086)

  scenarios: (100.00%) 1 scenario, 2 max VUs, 37s max duration (incl. graceful stop):
           * default: Up to 2 looping VUs for 7s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)


running (07.0s), 0/2 VUs, 210 complete and 0 interrupted iterations
default âœ“ [======================================] 0/2 VUs  7s

     âœ“ is success

     checks.........................: 100.00% âœ“ 210       âœ— 0
     data_received..................: 767 kB  109 kB/s
     data_sent......................: 30 kB   4.2 kB/s
     http_req_blocked...............: avg=102.55Âµs min=1.5Âµs   med=3.24Âµs  max=14.35ms p(90)=4.68Âµs   p(95)=17.71Âµs
     http_req_connecting............: avg=11.94Âµs  min=0s      med=0s      max=1.84ms  p(90)=0s       p(95)=0s
     http_req_duration..............: avg=59.32ms  min=55.13ms med=58.52ms max=76.76ms p(90)=62.77ms  p(95)=65.54ms
       { expected_response:true }...: avg=59.32ms  min=55.13ms med=58.52ms max=76.76ms p(90)=62.77ms  p(95)=65.54ms
     http_req_failed................: 0.00%   âœ“ 0         âœ— 210
     http_req_receiving.............: avg=86.22Âµs  min=28.28Âµs med=76.12Âµs max=1.09ms  p(90)=110.42Âµs p(95)=136.34Âµs
     http_req_sending...............: avg=21.88Âµs  min=8.3Âµs   med=21.23Âµs max=81.54Âµs p(90)=35.12Âµs  p(95)=43.47Âµs
     http_req_tls_handshaking.......: avg=83.45Âµs  min=0s      med=0s      max=13.14ms p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=59.21ms  min=54.99ms med=58.42ms max=76.66ms p(90)=62.67ms  p(95)=65.44ms
     http_reqs......................: 210     29.955813/s
     iteration_duration.............: avg=59.61ms  min=55.26ms med=58.73ms max=76.89ms p(90)=62.94ms  p(95)=66.07ms
     iterations.....................: 210     29.955813/s
     vus............................: 1       min=1       max=2
     vus_max........................: 2       min=2       max=2       
```
- Load Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
    threshold: {
        http_req_duration: ['p(99)<1000'],
    },
    stages: [
        {duration: '10s', target: 23},
        {duration: '300s', target: 64},
        {duration: '10s', target: 0},
    ],
};

const BASE_URL = 'https://yomni-subway.kro.kr';
const SOURCE_STATION_ID = 1;
const TARGET_STATION_ID = 6;
// 27ê°œì—­ í†µê³¼ ê²½ë¡œ ì¡°íšŒ

export default function () {

    const pathRes = http.get(
        `${BASE_URL}/paths?source=${SOURCE_STATION_ID}&target=${TARGET_STATION_ID}`);

    check(pathRes, {
        'is success': (r) => r.status === 200,
    });
}
```
```shell
  execution: local
     script: load_path.js
     output: InfluxDBv1 (http://localhost:8086)

  scenarios: (100.00%) 1 scenario, 64 max VUs, 5m50s max duration (incl. graceful stop):
           * default: Up to 64 looping VUs for 5m20s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)


running (5m20.1s), 00/64 VUs, 43560 complete and 0 interrupted iterations
default âœ“ [======================================] 00/64 VUs  5m20s

     âœ“ is success

     checks.........................: 100.00% âœ“ 43560      âœ— 0
     data_received..................: 158 MB  493 kB/s
     data_sent......................: 6.0 MB  19 kB/s
     http_req_blocked...............: avg=15.8Âµs   min=987ns   med=2.76Âµs   max=46.65ms  p(90)=4.3Âµs    p(95)=6.22Âµs
     http_req_connecting............: avg=1.72Âµs   min=0s      med=0s       max=7.33ms   p(90)=0s       p(95)=0s
     http_req_duration..............: avg=306.21ms min=55.48ms med=315.77ms max=944.99ms p(90)=440.08ms p(95)=465.32ms
       { expected_response:true }...: avg=306.21ms min=55.48ms med=315.77ms max=944.99ms p(90)=440.08ms p(95)=465.32ms
     http_req_failed................: 0.00%   âœ“ 0          âœ— 43560
     http_req_receiving.............: avg=90.26Âµs  min=20.25Âµs med=71.68Âµs  max=15.13ms  p(90)=114.84Âµs p(95)=163.37Âµs
     http_req_sending...............: avg=23.93Âµs  min=5.53Âµs  med=15.47Âµs  max=11.96ms  p(90)=36.16Âµs  p(95)=47.84Âµs
     http_req_tls_handshaking.......: avg=9Âµs      min=0s      med=0s       max=43ms     p(90)=0s       p(95)=0s
     http_req_waiting...............: avg=306.1ms  min=55.39ms med=315.65ms max=944.76ms p(90)=439.98ms p(95)=465.22ms
     http_reqs......................: 43560   136.102547/s
     iteration_duration.............: avg=306.41ms min=55.68ms med=315.92ms max=945.11ms p(90)=440.26ms p(95)=465.55ms
     iterations.....................: 43560   136.102547/s
     vus............................: 1       min=1        max=63
     vus_max........................: 64      min=64       max=64
```
- Stress Test
```javascript
import http from 'k6/http';
import {check} from 'k6';

export let options = {
    threshold: {
        http_req_duration: ['p(99)<1000'],
    },
    stages: [
        {duration: '5s', target: 23},
        {duration: '10s', target: 180},
        {duration: '5s', target: 0},
    ],
};

const BASE_URL = 'https://yomni-subway.kro.kr';
const SOURCE_STATION_ID = 1;
const TARGET_STATION_ID = 6;
// 27ê°œì—­ í†µê³¼ ê²½ë¡œ ì¡°íšŒ

export default function () {

    const pathRes = http.get(
        `${BASE_URL}/paths?source=${SOURCE_STATION_ID}&target=${TARGET_STATION_ID}`);

    check(pathRes, {
        'is success': (r) => r.status === 200,
    });
}
```
```shell
  execution: local
     script: stress_path.js
     output: InfluxDBv1 (http://localhost:8086)

  scenarios: (100.00%) 1 scenario, 180 max VUs, 50s max duration (incl. graceful stop):
           * default: Up to 180 looping VUs for 20s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)


running (20.0s), 000/180 VUs, 2387 complete and 0 interrupted iterations
default âœ“ [======================================] 000/180 VUs  20s

     âœ“ is success

     checks.........................: 100.00% âœ“ 2387       âœ— 0
     data_received..................: 9.4 MB  468 kB/s
     data_sent......................: 395 kB  20 kB/s
     http_req_blocked...............: avg=326.34Âµs min=1.09Âµs  med=2.9Âµs    max=19.5ms  p(90)=18.8Âµs   p(95)=3.66ms
     http_req_connecting............: avg=57.16Âµs  min=0s      med=0s       max=7.96ms  p(90)=0s       p(95)=663.38Âµs
     http_req_duration..............: avg=669.49ms min=54.79ms med=618.7ms  max=2.26s   p(90)=1.29s    p(95)=1.41s
       { expected_response:true }...: avg=669.49ms min=54.79ms med=618.7ms  max=2.26s   p(90)=1.29s    p(95)=1.41s
     http_req_failed................: 0.00%   âœ“ 0          âœ— 2387
     http_req_receiving.............: avg=94.69Âµs  min=21.55Âµs med=72.83Âµs  max=13.76ms p(90)=114.59Âµs p(95)=159.19Âµs
     http_req_sending...............: avg=23.02Âµs  min=5.99Âµs  med=15.88Âµs  max=1.62ms  p(90)=38.27Âµs  p(95)=53.25Âµs
     http_req_tls_handshaking.......: avg=255.26Âµs min=0s      med=0s       max=15.19ms p(90)=0s       p(95)=2.89ms
     http_req_waiting...............: avg=669.37ms min=54.66ms med=618.57ms max=2.26s   p(90)=1.29s    p(95)=1.41s
     http_reqs......................: 2387    119.191979/s
     iteration_duration.............: avg=670ms    min=54.97ms med=619.71ms max=2.26s   p(90)=1.29s    p(95)=1.41s
     iterations.....................: 2387    119.191979/s
     vus............................: 6       min=4        max=178
     vus_max........................: 180     min=180      max=180
```
---
### ê²°ë¡  
ëª¨ë“  ë¶€í•˜í…ŒìŠ¤íŠ¸ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ checks 100%ë¥¼ ë‹¬ì„±í–ˆë‹¤.  
ë”°ë¼ì„œ, í˜„ì¬ ì‹œìŠ¤í…œ ìƒì—ì„œ **ì˜ˆìƒë˜ëŠ” ìˆ˜ìš”ëŸ‰ì„ ëª¨ë‘ ë§Œì¡±í• ë§Œí•œ ìˆ˜ì¤€ì¸ ê²ƒìœ¼ë¡œ í™•ì¸**ëœë‹¤.

#### ì¶”ê°€ grafana êµ¬ì¶• 
![grafana.png](images%2Fstep2%2Fgrafana.png)

---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§
1. ê° ì„œë²„ë‚´ ë¡œê¹… ê²½ë¡œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”

2. Cloudwatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”

---
<a name="footnote_1">[1] Smoke Test</a> : í•˜ë“œì›¨ì–´ í…ŒìŠ¤íŠ¸ ë‹¨ê³„ë¡œë¶€í„° ë‚˜ì˜¨ ë‹¨ì–´.   
í•˜ë“œì›¨ì–´ëŠ” ì¡°ë¦½ / ë‚©ë•œ / ë°°ì„  ê³¼ì •ì´ ì˜¬ë°”ë¥´ê²Œ ë˜ì—ˆëŠ” ì§€ í™•ì¸í•˜ê¸° ìœ„í•´, ìµœì¢…ì ìœ¼ë¡œ ì „ì›ì— ì—°ê²°í•˜ê³  ì „ì›ì„ ì¼œëŠ”(smoke ; ë¶ˆì„ ë¶™ì´ë‹¤) í…ŒìŠ¤íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤. 