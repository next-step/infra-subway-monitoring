<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install

#### npm ì„¤ì¹˜

```
cd frontend
npm install
```

> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage

#### webpack server êµ¬ë™

```
npm run dev
```

#### application êµ¬ë™

```
./gradlew clean build
```

<br>

### ì›¹ ì„±ëŠ¥ ì§„ë‹¨ ìš©ì–´

```
- FCP (First Contentful Paint) : í˜ì´ì§€ê°€ ë¡œë“œë˜ê¸° ì‹œì‘í•œ ì‹œì ë¶€í„° í˜ì´ì§€ ì½˜í…ì¸ ì˜ ì¼ë¶€ê°€ í™”ë©´ì— ë Œë”ë§ë  ë•Œê¹Œì§€ì˜ ì‹œê°„
- TTI (Time to Interactive) : í˜ì´ì§€ê°€ ì™„ì „íˆ ìƒí˜¸ ì‘ìš© ê°€ëŠ¥í•˜ê²Œ ë˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„
- SI (Speed Index) : í˜ì´ì§€ ë¡œë“œ ì¤‘ì— ì½˜í…ì¸ ê°€ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ì†ë„
- TBT (Total Blocking Time) : í˜ì´ì§€ê°€ ì•ˆì •ì ì¸ ìƒí˜¸ ì‘ìš© í™˜ê²½ì´ ë˜ê¸° ì „, ìƒí˜¸ ì‘ìš©ì´ ë¶ˆê°€ëŠ¥í•œ ì‹œê°„
- LCP (Largest Contentful Paint) : ì´ˆê¸° DOM ì½˜í…ì¸ ê°€ ë Œë”ë§ë˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •
- CLS (Cumulative Layout Shift) :  ì‚¬ìš©ìê°€ ì˜ˆìƒì¹˜ ëª»í•œ ë ˆì´ì•„ì›ƒ ì´ë™ì„ ê²½í—˜í•˜ëŠ” ë¹ˆë„
```

### ì›¹ ì„±ëŠ¥ ì§„ë‹¨ - ê²½ìŸì‚¬ í¬í•¨

#### ì„±ëŠ¥ ì§„ë‹¨ ì‚¬ì´íŠ¸

[ì›¹ ì„±ëŠ¥ ì§„ë‹¨ ì‚¬ì´íŠ¸ - PageSpeed Insights](https://pagespeed.web.dev)

#### ì„±ëŠ¥ ì§„ë‹¨ ëŒ€ìƒ ì‚¬ì´íŠ¸

- [RunningMap](https://orgojy.ga)
- [ì„œìš¸êµí†µê³µì‚¬](http://www.seoulmetro.co.kr)
- [ë„¤ì´ë²„ë§µ](https://map.naver.com)
- [ì¹´ì¹´ì˜¤ë§µ](https://map.kakao.com)

#### ì„±ëŠ¥ ì§„ë‹¨ - íœ´ëŒ€ì „í™”

|            | FCP   | TTI   | SI    | TBT      | LCP   | CLS   | Performance |
|------------|-------|-------|-------|----------|-------|-------|-------------|
| RunningMap | 14.9s | 15.6s | 14.9s | 600ms    | 15.5s | 0.041 | 30          |
| ì„œìš¸êµí†µê³µì‚¬     | 7.2s  | 8.5s  | 20.6s | 260ms    | 17.3s | 0     | 44          |
| ë„¤ì´ë²„ë§µ       | 2.2s  | 24.2s | 11.4s | 15,280ms | 17.7s | 0.017 | 23          |
| ì¹´ì¹´ì˜¤ë§µ       | 1.7s  | 4.2s  | 6.6s  | 70ms     | 6.3s  | 0.139 | 65          |

#### ì„±ëŠ¥ ì§„ë‹¨ - ë°ìŠ¤í¬í†±

|            | FCP  | TTI  | SI   | TBT   | LCP  | CLS   | Performance |
|------------|------|------|------|-------|------|-------|-------------|
| RunningMap | 2.7s | 2.8s | 2.7s | 30ms  | 2.8s | 0.004 | 68          |
| ì„œìš¸êµí†µê³µì‚¬     | 1.7s | 2.3s | 7.6s | 70ms  | 3.7s | 0.229 | 57          |
| ë„¤ì´ë²„ë§µ       | 0.4s | 3.5s | 3.1s | 630ms | 9.6s | 0     | 40          |
| ì¹´ì¹´ì˜¤ë§µ       | 0.6s | 2.7s | 2.3s | 800ms | 0.7s | 0.018 | 66          |

### 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### 1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”

**ëª©í‘œ : "ì¹´ì¹´ì˜¤ë§µ"ê³¼ ê°™ì€ UXë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ë¹„ìŠ·í•œ ìˆ˜ì¤€ì¸ 80% í–¥ìƒìœ¼ë¡œ ì„±ëŠ¥ì˜ˆì‚°ì„ ì±…ì •í•©ë‹ˆë‹¤.**

**ì„±ëŠ¥ì˜ˆì‚° - íœ´ëŒ€ì „í™”**

| Mobile | FCP   | TTI   | SI    | LCP   |
|--------|-------|-------|-------|-------|
| ASIS   | 14.9s | 15.6s | 14.9s | 15.5s |
| TOBE   | ì•½ 2s  | ì•½ 5s  | ì•½ 7s  | ì•½ 7s  |

**ì„±ëŠ¥ì˜ˆì‚° - ë°ìŠ¤í¬í†±**

| Desktop | FCP  | TTI  | SI   | LCP  | 
|---------|------|------|------|------|
| ASIS    | 2.7s | 2.8s | 2.7s | 2.8s |
| TOBE    | ì•½ 1s | ì•½ 3s | ì•½ 3s | ì•½ 1s |

#### 2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ëŠ” ì–´ë–¤ ë¶€ë¶„ì„ ê°œì„ í•˜ë©´ ì¢‹ì„ê¹Œìš”

- íœ´ëŒ€ì „í™”ì—ì„œ ìµœì í™”ë  ìˆ˜ ìˆëŠ” ìµœì í™”ëœ ì‚¬ì´ì¦ˆì˜ ë¦¬ì†ŒìŠ¤ íŒŒì¼ë¡œ ì••ì¶•í•©ë‹ˆë‹¤.
- ëª¨ë“  ì›¹ í˜ì´ì§€ì˜ ê° í˜ì´ì§€ ë‚´ í¬í•¨ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ í¬ê¸°ëŠ” 1MBë¥¼ ë„˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸, CSS ë¥¼ ì œê±° í•©ë‹ˆë‹¤.
- ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¸Œë¼ìš°ì €ì˜ ìºì‹œë¥¼ ìµœëŒ€í•œ ì‚¬ìš© í•©ë‹ˆë‹¤.
- í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì••ì¶•(gzip, deflate, brotli)í•˜ì—¬ ì œê³µ í•©ë‹ˆë‹¤.
- ë©”ì¸ í˜ì´ì§€ì˜ ëª¨ë“  ì˜¤ë¸Œì íŠ¸ íŒŒì¼ í¬ê¸°ëŠ” 10MB ë¯¸ë§Œìœ¼ë¡œ ì œí•œ í•©ë‹ˆë‹¤.

---

### 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸

1. ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ì€ ì–´ëŠì •ë„ë¡œ ì„¤ì •í•˜ì…¨ë‚˜ìš”

**ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„**

```
1. "ê²½ë¡œ ê²€ìƒ‰"
    * ì—­ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ, ê²½ë¡œ ê²€ìƒ‰, ë¡œê·¸ì¸, ì¦ê²¨ì°¾ê¸°
2. "ë§ˆì´ í˜ì´ì§€"
    * ë¡œê·¸ì¸, ë‚´ ì •ë³´ ì¡°íšŒ, ë‚´ ì •ë³´ ê°±ì‹ 
```

**ì˜ˆìƒ ìˆ˜ì¹˜ ì„¤ì •**

```
* 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU): 1,500,000
    * ì¹´ì¹´ì˜¤ë§µ MAUì˜ 20% ìˆ˜ì¤€ ì˜ˆìƒ(ì¹´ì¹´ì˜¤ë§µ MAU: 7,290,000)
    * í”¼í¬ ì‹œê°„ëŒ€ì˜ ì§‘ì¤‘ë¥ (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½): 4.0
        * í”¼í¬ ì‹œê°„ëŒ€: ì˜¤ì „ 8 ~ 9ì‹œ, ì˜¤í›„ 6 ~ 7ì‹œ
        * ìµœëŒ€ íŠ¸ë˜í”½(ì§€ì—­ë³„ í‰ê· ): 1,000,000
        * í‰ì†Œ íŠ¸ë˜í”½(ì§€ì—­ë³„ í‰ê· ): 200,000
    * 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† í˜¹ì€ ìš”ì²­ìˆ˜
        * 1ì¼ í‰ê·  ì ‘ì†: ì´ 3íšŒ - ì¦ê²¨ì°¾ê¸° í™•ì¸(ì¶œ/í‡´ê·¼), ê²½ë¡œ ê²€ìƒ‰
        * 1íšŒ ì ‘ì†ì‹œ ìš”ì²­: ì´ 4íšŒ - ë©”ì¸ í˜ì´ì§€, ë¡œê·¸ì¸ í˜ì´ì§€, ë¡œê·¸ì¸, ì¦ê²¨ì°¾ê¸° ì¡°íšŒ
```

**ëª©í‘œê°’ ì„¤ì •**

```
throughput
    * í˜„ì¬ ìš°ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œì™€ ê°œë°œ ì—¬ê±´ì„ ê³ ë ¤í•˜ì—¬ ì„¤ì • 
    * MAU = 150ë§Œ
    * DAU = MAU / 30 = 5ë§Œ
    * 1ì¼ í‰ê·  ì ‘ì†ìˆ˜ = 10íšŒ
    * 1ì¼ ì´ ì ‘ì†ìˆ˜ = DAU x 1ì¼ í‰ê·  ì ‘ì†íšŸìˆ˜ = 50ë§ŒíšŒ
    * 1ì¼ í‰ê·  rps = 1ì¼ ì´ ì ‘ì†ìˆ˜ / 1ì¼ ì´ˆì˜ ì´í•© = 500,000 / 86,440 = 5.78
    * peek ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥  = ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½ = 1,000,000 / 200,000 = 5 
    * 1ì¼ ìµœëŒ€ rps = 1ì¼ í‰ê·  rps x (peakì‹œ 5ë°°ë¡œ ê°€ì •) = 28.9
latency
    * 200ms
VUser
    * "My Page"
        * R(requests) = ë¡œê·¸ì¸ + ë‚´ ì •ë³´ ì¡°íšŒ + ë‚´ ì •ë³´ ìˆ˜ì • = 3ê°œ
        * http_req_duration = R x latency = 3 x 0.2 = 0.6
        * ëª©í‘œ ì‘ë‹µì‹œê°„ T(VU iteration) = R x http_req_duration + ì§€ì—°ì‹œê°„ = (3 * 0.6s) + 0s = 1.8s 
        * í‰ê·  VUser = (1ì¼ í‰ê·  rps * T) / R = 5.78 x 1.8 / 3 = 3.468 â‰’ 3
        * ìµœëŒ€ VUser = í‰ê·  VUser x peek ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥  = 3.468 x 5 = 17.34 â‰’ 17
    * "Path Searching Page"
        * R(requests) = ì—­ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ + ê²½ë¡œ ê²€ìƒ‰ + ë¡œê·¸ì¸ + ì¦ê²¨ì°¾ê¸° = 4ê°œ
        * http_req_duration = R x latency = 4 x 0.2 = 0.8 
        * ëª©í‘œ ì‘ë‹µì‹œê°„ T(VU iteration) = R x http_req_duration + ì§€ì—°ì‹œê°„ = (4 * 0.8s) + 0s = 3.2s
        * í‰ê·  VUser = (1ì¼ í‰ê·  rps * T) / R = 5.78 x 3.2 / 4 = 4.624 â‰’ 5
        * ìµœëŒ€ VUser = í‰ê·  VUser x peek ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥  = 4.624 x 5 = 23.12 â‰’ 23
ë¶€í•˜ ìœ ì§€ê¸°ê°„
    * smoke test
        * "My Page": (1m,1vus)
        * "Path Searching Page": (1m,1vus)
    * load test
        * "My Page": (1m,1vus)->(3m,3vus)->(5m,17vus)->(3m,3vus)->(10s,0vus)
        * "Path Searching Page": (1m,1vus)->(3m,5vus)->(5m,23vus)->(3m,5vus)->(10s,0vus)
    * stress test : 10m
        * "My Page": (3m,100vus)->(3m,200vus)->(3m,300vus)->(3m,400vus)->(3m,500vus)->(10s,0vus)
        * "Path Searching Page": (3m,100vus)->(3m,200vus)->(3m,300vus)->(3m,400vus)->(3m,400vus)->(3m,500vus)->(10s,0vus)
```

**í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ì‹**

```
# ì‹¤í–‰
k6 run smoke/path_searching_page.js
# ë””ë²„ê¹… ì‹¤í–‰
k6 run smoke/path_searching_page.js --http-debug="full"
```

2. Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”

**Smoke Test**

["My Page" í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ JS íŒŒì¼](k6/smoke/my_page.js) ì˜ ê²°ê³¼ í™”ë©´
!["My Page" í…ŒìŠ¤íŠ¸ ê²°ê³¼ í™”ë©´](./k6/smoke/my_page-smoke_result.png)
["Path Searching Page" í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ JS íŒŒì¼](k6/smoke/path_searching_page.js) ì˜ ê²°ê³¼ í™”ë©´
!["Path Searching Page" í…ŒìŠ¤íŠ¸ ê²°ê³¼ í™”ë©´](./k6/smoke/path_searching_page-smoke_result.png)

**Load Test**

["My Page" í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ JS íŒŒì¼](k6/load/my_page.js) ì˜ ê²°ê³¼ í™”ë©´

---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§

1. ê° ì„œë²„ë‚´ ë¡œê¹… ê²½ë¡œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”

2. Cloudwatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”
