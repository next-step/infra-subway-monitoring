<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install
#### npm ì„¤ì¹˜
```
cd frontend
npm install
```
> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage
#### webpack server êµ¬ë™
```
npm run dev
```
#### application êµ¬ë™
```
./gradlew clean build
```
<br>


## 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### ê²½ìŸì‚¬ ë¹„êµë¶„ì„

> MyPage : https://sawooook-webservice.p-e.kr/  
> ì„œêµê³µ : http://www.seoulmetro.co.kr/kr/cyberStation.do   
> ì¹´ì¹´ì˜¤ë§µ : https://m.map.kakao.com/  
> ë„¤ì´ë²„ì§€ë„ : https://m.map.naver.com/subway/subwayLine.naver?region=1000

#### MOBLIE
| mobile | ì„œêµê³µ | ì¹´ì¹´ì˜¤ë§µ  | ë„¤ì´ë²„ì§€ë„ | MyPage |
|--------|--------|-------|-------|--------|
| FCP    | 6.6s   | 1.7s  | 2.2s  | 14.7s  |
| TTI    | 8.7s   | 4.7s  | 6.2s  | 15.3s  |
| SI     | 8.3s   | 7.3s  | 5.0s  | 14.7s  |
| TBT    | 1540ms | 100ms | 420ms | 580ms  |
| LCP    | 7.5s   | 5.6s  | 7.8s  | 15.3s  |
| CLS    | 0      | 0.005 | 0.03  | 0.042  |

#### DESKTOP
| desktop | ì„œêµê³µ   | ì¹´ì¹´ì˜¤ë§µ  | ë„¤ì´ë²„ì§€ë„ | MyPage |
|---------|-------|-------|-------|----------|
| FCP     | 1.4s  | 0.5s  | 0.5s  | 2.7s     |
| TTI     | 2.2s  | 0.7s  | 0.7s  | 2.8s     |
| SI      | 2.4s  | 2.7s  | 2.3s  | 2.7s     |
| TBT     | 690ms | 0ms   | 0ms   | 70ms     |
| LCP     | 2.7s  | 1.2s  | 1.4s  | 2.8s     |
| CLS     | 0     | 0.039 | 0.03  | 0.004    |


1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”
+ ê²½ìŸì‚¬ë“¤ ì¤‘ì„ ê°€ì¥ ë¹ ë¥¸ ì§€í‘œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëª©í‘œë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤

  |     | mobile | desktop |
  |--------|---------|------- |
  | FCP | 1.7s   | 0.5s    |
  | TTI | 4.7s   | 0.7s    |
  | SI  | 5.0s   | 2.3s    |
  | TBT | 100ms  | 0ms     |
  | LCP | 5.6s   | 1.4s    |
  | CLS | 0      | 0.001   |

+ ì§€ë„ì°¾ê¸° ì•± íŠ¹ì„±ìƒ ì•¼ì™¸ì—ì„œ ê¸¸ì°¾ê¸°ë¥¼ í•˜ëŠ”ë° ë§ì´ ì‚¬ìš©ë  ê²ƒì´ë¼ê³  íŒë‹¨í•˜ì—¬ Mobile ì„±ëŠ¥ê°œì„ ì— ì´ˆì ì„ ë§ì¶”ë ¤ê³ í•©ë‹ˆë‹¤.
+ TTIì™€ FCPì˜ ê²½ìš° ê°€ì¥ ë¹ ë¥¸ ê²½ìŸì‚¬ ëŒ€ë¹„ 3~4ë°°, 13~14ë°° ê°€ê¹Œì´ ëŠë¦°ìƒí™©ì¸ë° ì´ë¥¼ ê°œì„ í•˜ì—¬ ì‚¬ìš©ìê°€ ëŠë¦¼(?)ì„ ëŠë¼ì§€ ì•Šë„ë¡ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
  + FCPë¥¼ ë¹ ë¥´ê²Œí•˜ì—¬ í™”ë©´ì´ ëœ¨ê³  ìˆë‹¤ê³  ìœ ì €ì—ê²Œ ì•Œë ¤ì¤˜ ì´íƒˆì„ ë°©ì§€ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
  + TTIë¥¼ ê°œì„ í•¨ìœ¼ë¡œì¨ ìœ ì €ê°€ ë¹ ë¥´ê²Œ ì•±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤í•©ë‹ˆë‹¤.

2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ì˜ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”.
+ ëª©í‘œ ê°œì„ ì ìœ¼ë¡œ ì¡ì€ FCPë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
  + ì´ë¯¸ì§€ ì••ì¶•
  + í…ìŠ¤íŠ¸ ì••ì¶•
  + ì´ë¯¸ì§€ í¬ê¸° ì¬ì¡°ì •
+ FCPë¥¼ ì–´ëŠì •ë„ ê°œì„ ì„ í•˜ë©´ TTIë„ ì–´ëŠì •ë„ ë¹¨ë¼ì§ˆê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤ TTIë¥¼ ì¢€ë” ë¹ ë¥´ê²Œ í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ í•´ë³´ë ¤ê³ í•©ë‹ˆë‹¤.
  + API ì„±ëŠ¥ ê°œì„ 

---

## 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸
####  ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„
+ ê²½ë¡œê²€ìƒ‰ í˜ì´ì§€
+ ë¡œê·¸ì¸ í˜ì´ì§€
+ ê²½ë¡œ ê²€ìƒ‰

#### ëª©í‘œ RPS êµ¬í•˜ê¸°
1. ì˜ˆìƒ 1ì¼ ì‚¬ìš©ììˆ˜ (DAU)
+ 2022ë…„ 11ì›” ì§€í•˜ì²  ì´ ìŠ¹ì°¨ ìŠ¹ê° ìˆ˜ 204,268,648ëª…
  + ( 204,268,648 / 2) / 30 = 3,404,477
    + ( 11ì›” ì§€í•˜ì²  ì´ ìŠ¹ì°¨ ìŠ¹ê°ìˆ˜ / ì¶œê·¼ + í‡´ê·¼ ) / í•œë‹¬ = 3,404,477
> ì˜ˆìƒ 1ì¼ ì‚¬ìš©ììˆ˜ DAU : 60ë§Œëª… (ë„¤ì´ë²„ë§µê³¼ ì¹´ì¹´ì˜¤ë§µì´ ì´ë¯¸ ì‹œì¥ì„ ì¥ì•…í•˜ê³  ìˆìœ¼ë¯€ë¡œ 1/6 ì´ë¼ê³  ê°€ì •)

2. í”¼í¬ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥  (ìµœëŒ€ íŠ¸ë˜í”½, ìµœì†Œ íŠ¸ë˜í”½)
+ í”¼í¬ì‹œê°„ëŒ€ ì§€í•˜ì²  ì‚¬ìš©ì ìˆ˜ 
  + í‡´ê·¼ì‹œê°„ (18ì‹œ ~ 19ì‹œ)
    + 1,019,132ëª…
+ ì œì¼ ì ì€ ì‹œê°„ëŒ€ ì§€í•˜ì²  ì‚¬ìš©ì ìˆ˜ 
  + ìƒˆë²½ì‹œê°„ (05ì‹œ ~ 06ì‹œ)
    + 86,929ëª…
+ í‰ë²”í•œ ì‹œê°„ëŒ€ ì§€í•˜ì²  ì‚¬ìš© ì ìˆ˜
  + ì˜¤í›„ì‹œê°„ (11ì‹œ ~ 16ì‹œ)
    + 482,047ëª…

> ìš°ë¦¬ ì‚¬ì´íŠ¸ì— ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ ìµœëŒ€ì™€ ìµœì†Œ  
> ìµœëŒ€ íŠ¸ë˜í”½ : (1,019,132 / 6) = ì•½ 170,000ëª…
> ìµœì†Œ íŠ¸ë˜í”½ : (86,929 / 6) = ì•½ 15,000ëª…
> í‰ê·  íŠ¸ë˜í”½ : (482,047 / 6) = ì•½ 80,000ëª…
> 
> (ë„¤ì´ë²„ë§µê³¼ ì¹´ì¹´ì˜¤ë§µì´ ì¡´ì¬í•˜ë¯€ë¡œ 1/6 ì´ë¼ê³  ê°€ì •)

( https://insfiler.com/detail/rt_transit_time-0002?category=life ì§€í•˜ì²  ìŠ¹ê°ìˆ˜ ë¹„êµ ì´ìš© )

4. 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜
+ (ì¶œê·¼ ì‹œê°„ + í‡´ê·¼ ì‹œê°„) = 2ë²ˆ

5. Throughput ê³„ì‚°

```
Throughput ê²Œì‚° ê³µì‹

(1ì¼ ì´ ì ‘ì† ìˆ˜) = 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU) x 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜ 
(1ì¼  í‰ê·  rps) = 1ì¼ ì´ ì ‘ì† ìˆ˜ / 86,400 (ì´ˆ/ì¼)
(1ì¼  ìµœëŒ€ rps) = 1ì¼ í‰ê·  rps x (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½)
```

+ 160,000 = 80,000 * 2 (1ì¼ ì´ ì ‘ì†ì ìˆ˜)
+ 14rps = 160,000 / 10,800 (1ì¼ í‰ê·  rps)
+ 30rps = 14 * (170,000/80,000) = ì•½ 30rps (1ì¼ ìµœëŒ€ rps)

6. VUser êµ¬í•˜ê¸°
+ R : 2.5
  + ì‹œë‚˜ë¦¬ì˜¤ê°€ ë‘ê°œ ìˆì„ ìˆ˜ ìˆë‹¤ê³  íŒë‹¨
    + (ë©”ì¸ -> ë¡œê·¸ì¸ -> ê²½ë¡œê²€ìƒ‰)
    + (ë©”ì¸ -> ê²½ë¡œê²€ìƒ‰)
+ http_req_duration : 0.3
> T : (2.5 * 0.3) + 1s = 1.75
> VUser = (30 * 1.75) / 3 = ì•½ 17   (ëª©í‘œ RPSëŠ” 1ì¼ ìµœëŒ€ RPSë¡œ ê°€ì •)



2. Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”
ê° í´ë” íŒŒì¼ì— ì²¨ë¶€í•˜ì˜€ìŠµë‹ˆë‹¤ ğŸ˜

---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§
#### ì ‘ì†í•˜ì‹¤ ì•„ì´ë”” (Web)
+ ssh -i sawooook-key.pem ubuntu@13.124.4.105

#### ë¡œê¹… ê²½ë¡œ
+ nginx : /var/log/nginx/
+ applicationLog : /home/ubuntu/infra-subway-monitoring/log/


2. Cloudwatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”
https://ap-northeast-2.console.aws.amazon.com/cloudwatch/home?region=ap-northeast-2#dashboards:name=sawooook-dashboard
