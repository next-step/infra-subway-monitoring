<p align="center">
    <img width="200px;" src="https://raw.githubusercontent.com/woowacourse/atdd-subway-admin-frontend/master/images/main_logo.png"/>
</p>
<p align="center">
  <img alt="npm" src="https://img.shields.io/badge/npm-%3E%3D%205.5.0-blue">
  <img alt="node" src="https://img.shields.io/badge/node-%3E%3D%209.3.0-blue">
  <a href="https://edu.nextstep.camp/c/R89PYi5H" alt="nextstep atdd">
    <img alt="Website" src="https://img.shields.io/website?url=https%3A%2F%2Fedu.nextstep.camp%2Fc%2FR89PYi5H">
  </a>
  <img alt="GitHub" src="https://img.shields.io/github/license/next-step/atdd-subway-service">
</p>

<br>

# ì¸í”„ë¼ê³µë°© ìƒ˜í”Œ ì„œë¹„ìŠ¤ - ì§€í•˜ì²  ë…¸ì„ ë„

<br>

## ğŸš€ Getting Started

### Install

#### npm ì„¤ì¹˜

```
cd frontend
npm install
```

> `frontend` ë””ë ‰í† ë¦¬ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### Usage

#### webpack server êµ¬ë™

```
npm run dev
```

#### application êµ¬ë™

```
./gradlew clean build
```

<br>

### 1ë‹¨ê³„ - ì›¹ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### ìš”êµ¬ì‚¬í•­

- [x] ì›¹ ì„±ëŠ¥ ì˜ˆì„œì‚° ì‘ì„± í›„ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ë„ì¶œ

---

#### ìš©ì–´ ì •ë¦¬

> [ë¼ì´íŠ¸í•˜ìš°ìŠ¤ ì„±ëŠ¥ ì§€í‘œ ì‚´í´ë³´ê¸°](https://url.kr/oyga3r)

- FCP(First Contentful Paint) : ì˜ë¯¸ìˆëŠ” ì½˜í…ì¸  ì¼ë¶€ê°€ ì²˜ìŒ í™”ë©´ì— ë Œë”ë§ ë  ë•Œê¹Œì§€ì˜ ì‹œê°„
- SI(Speed Index) : ì½˜í…ì¸ ê°€ ì‹ë³„ ê°€ëŠ¥í•˜ê²Œ ì±„ì›Œì§€ëŠ” ì†ë„ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ ë¡œë“œ ì„±ëŠ¥
- LCP(Largest Contentful Paint) : ê°€ì¥ í° ì½˜í…ì¸  í˜ì¸íŒ… ì‹œê°„
- TTI(First Input Delay) : í˜ì´ì§€ê°€ ì™„ì „íˆ ì‚¬ìš©ìì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„
- TBT(Total Blocking Time) : FCP ì™€ TTI ì‚¬ì´ì—ì„œ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ì§€ ëª»í–ˆë˜ ì‹œê°„
- CLS(Cumulative Layout Shift) : ì‚¬ìš©ìê°€ ì˜ˆìƒí•˜ì§€ ëª»í•œ ë ˆì´ì•„ì›ƒì„ ê²½í—˜í•˜ëŠ” ë¹ˆë„ë¥¼ ì •ëŸ‰í™”

#### ë¹„êµ ë¶„ì„ ê²°ê³¼

- Mobile

| mobile | ì„œìš¸êµí†µê³µì‚¬ | ë„¤ì´ë²„ì§€ë„ | ì¹´ì¹´ì˜¤ë§µ  | Running Map |
|:------:|:------:|:-----:|:-----:|:-----------:|
|  FCP   |  6.6s  | 2.4s  | 1.7s  |    14.8s    |
|   SI   |  8.7s  | 6.3s  | 6.8s  |    14.8s    |
|  LCP   |  6.8s  | 7.2s  | 6.8s  |    15.4s    |
|  TTI   |  8.8s  | 6.8s  | 4.5s  |    15.4s    |
|  TBT   | 1080ms | 540ms | 80ms  |    490ms    |
|  CLS   |   0    | 0.03  | 0.187 |    0.041    |

- Desktop

| desktop | ì„œìš¸êµí†µê³µì‚¬ | ë„¤ì´ë²„ì§€ë„ | ì¹´ì¹´ì˜¤ë§µ  | Running Map |
|:-------:|:------:|:-----:|:-----:|:-----------:|
|   FCP   |  1.4s  | 0.5s  | 0.5s  |    2.7s     |
|   SI    |  2.3s  | 2.4s  | 2.2s  |    2.7s     |
|   LCP   |  3.7s  | 1.5s  | 1.4s  |    2.8s     |
|   TTI   |  1.9s  | 1.2s  | 0.7s  |    2.8s     |
|   TBT   | 250ms  |  0ms  |  0ms  |    40ms     |
|   CLS   | 0.001  | 0.006 | 0.021 |    0.004    |

1. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì€ ì–´ëŠì •ë„ê°€ ì ë‹¹í•˜ë‹¤ê³  ìƒê°í•˜ì‹œë‚˜ìš”

- ì‹ ê·œ ì„œë¹„ìŠ¤ì¸ ë§Œí¼ ì‚¬ìš©ìì—ê²Œ ì„œë¹„ìŠ¤ í¼í¬ë¨¼ìŠ¤ì— ëŒ€í•´ ìœ ì˜ë¯¸í•œ ì¸ìƒì„ ì¤„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ê²½ìŸì‚¬ì¸ ë„¤ì´ë²„ì§€ë„ì™€ ì¹´ì¹´ì˜¤ë³´ë‹¤ 20% ë†’ì€ ì„±ëŠ¥ ì˜ˆì‚°ì„ ì¡ê² ìŠµë‹ˆë‹¤.
- ë‹¨, FCP ì™€ TTI ëŠ” ê° 3ì´ˆ, 5ì´ˆ ì´ë‚´ë¡œ ìœ ì§€í•˜ê² ìŠµë‹ˆë‹¤.

- ëª©í‘œ ì„±ëŠ¥ ì˜ˆì‚°

| mobile |  í˜„ì¬   |  ëª©í‘œ   |
|:------:|:-----:|:-----:|
|  FCP   | 14.8s | 2.0s  |
|   SI   | 14.8s | 5.0s  |
|  LCP   | 15.4s | 5.0s  |
|  TTI   | 15.4s | 4.0s  |

| desktop |  í˜„ì¬  |  ëª©í‘œ  |
|:-------:|:----:|:----:|
|   FCP   | 2.7s | 0.4s |
|   SI    | 2.7s | 2.0s |
|   LCP   | 2.8s | 1.1s |
|   TTI   | 2.8s | 0.5s |

2. ì›¹ ì„±ëŠ¥ì˜ˆì‚°ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì§€í•˜ì²  ë…¸ì„ ë„ ì„œë¹„ìŠ¤ì˜ ì„œë²„ ëª©í‘œ ì‘ë‹µì‹œê°„ ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”.

- `PageSpeed` ì‚¬ì´íŠ¸ì—ì„œ ì¶”ì²œí•œ ê°œì„  ì‚¬í•­ì„ ìœ„ì£¼ë¡œ ì ìš©í•˜ê² ìŠµë‹ˆë‹¤.
- ëª¨ë°”ì¼ ê¸°ì¤€

|           ê°œì„  ì‚¬í•­           | ì˜ˆìƒ ì ˆê°ì¹˜ |
|:-------------------------:|:------:|
|         í…ìŠ¤íŠ¸ ì••ì¶• ì‚¬ìš©         | 9.15s  |
|    ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¤„ì´ê¸°     | 3.45s  |
|       ë Œë”ë§ ì°¨ë‹¨ ë¦¬ì†ŒìŠ¤ ì œê±°       | 0.75s  |
| ì½˜ì²¸ì¸ ê°€ í¬í•¨ëœ ìµœëŒ€ í˜ì¸íŠ¸ ì´ë¯¸ì§€ ë¯¸ë¦¬ ë¡œë“œ | 0.48s  |

- ì´ ë°–ì— ì •ì ì¸ ì• ì…‹ ì œê³µ ë“±ì˜ ë°©ë²•ì„ ì ìš©í•˜ì—¬ `light house` ì ìˆ˜ë¥¼ 90 ì  ì´ìƒìœ¼ë¡œ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.

---

### 2ë‹¨ê³„ - ë¶€í•˜ í…ŒìŠ¤íŠ¸

#### ìš”êµ¬ì‚¬í•­

- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸
    - [ ] í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ ì •ë¦¬
        - [ ] ëŒ€ìƒ ì‹œìŠ¤í…œ ë²”ìœ„
        - [ ] ëª©í‘¯ê°’ ì„¤ì • (latency, throughput, ë¶€í•˜ ìœ ì§€ê¸°ê°„)
        - [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œ ì €ì¥ë  ë°ì´í„° ê±´ìˆ˜ ë° í¬ê¸°
    - [ ] ì•„ë˜ ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
        - [ ] ì ‘ì† ë¹ˆë„ê°€ ë†’ì€ í˜ì´ì§€
        - [ ] ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” í˜ì´ì§€
        - [ ] ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ”ë° ì—¬ëŸ¬ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€
    - [ ] Smoke, Load, Stress í…ŒìŠ¤íŠ¸ í›„ ê²°ê³¼ë¥¼ ê¸°ë¡

#### í…ŒìŠ¤íŠ¸ ì„¤ì •ê°’ êµ¬í•˜ê¸°

- ëª©í‘œ RPS êµ¬í•˜ê¸°
    - ì˜ˆìƒ 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU) ë„ì¶œ
    - í”¼í¬ ì‹œë‹¨ëŒ€ì˜ ì§‘ì¤‘ë¥  ì˜ˆìƒ (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½)
    - 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† íšŸìˆ˜ ì˜ˆìƒ
    - ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Throughput(1ì¼ í‰ê·  rps ~ 1ì¼ ìµœëŒ€ rps) ê³„ì‚°
        - 1ì¼ ì‚¬ìš©ì ìˆ˜(DAU) * 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜ = 1ì¼ ì´ ì ‘ì† ìˆ˜
        - 1ì¼ ì´ ì ‘ì† ìˆ˜ / 86,400 (ì´ˆ/ì¼) = 1ì¼ í‰ê·  rps
        - 1ì¼ í‰ê·  rps * í”¼í¬ ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥ (ìµœëŒ€ íŠ¸ë˜í”½ / í‰ì†Œ íŠ¸ë˜í”½) = 1ì¼ ìµœëŒ€ rps

- VUser êµ¬í•˜ê¸°
    - Request Rate: measured by the number of requests per second (RPS)
    - VU: the number of virtual users
    - R: the number of requests per VU iteration
    - T: a value larger than the time needed to complete a VU iteration
  ```shell
  T = (R * http_req_duration) (+ ls) ; ë‚´ë¶€ë§ì—ì„œ í…ŒìŠ¤íŠ¸í•  ê²½ìš° ì˜ˆìƒ latencyë¥¼ ì¶”ê°€í•œë‹¤.
  VUser = (ëª©í‘œ rps * T) / R
  ```

### í…ŒìŠ¤íŠ¸ ì¢…ë¥˜

* Smoke Test
    * ìµœì†Œí•œì˜ ë¶€í•˜ë¡œ êµ¬ì„±ëœ í…ŒìŠ¤íŠ¸. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
    * ìµœì†Œ ë¶€í•˜ ìƒíƒœì—ì„œ ì‹œìŠ¤í…œì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
    * VUser ë¥¼ 1 ~ 2ë¡œ êµ¬ì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸
* Load Test
    * ì„œë¹„ìŠ¤ì˜ í‰ì†Œ íŠ¸ë˜í”½ê³¼ ìµœëŒ€ íŠ¸ë˜í”½ì˜ ìƒí™©ì—ì„œ ì„±ëŠ¥ í™•ì¸. ì´ ë•Œ ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ë„ í™•ì¸
    * ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ì¸í”„ë¼ ë³€ê²½(scale out, DB failover ë“±)ì‹œì— ì„±ëŠ¥ ë³€í™” í™•ì¸
    * ì™¸ë¶€ ìš”ì¸(ê²°ì œ ë“±)ì— ë”°ë¥¸ ì˜ˆì™¸ ìƒí™©ì„ í™•ì¸
* Stress Test
    * ì„œë¹„ìŠ¤ê°€ ê·¹í•œì˜ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
    * ì¥ê¸°ê°„ ë¶€í•˜ ë°œìƒì— ëŒ€í•œ í•œê³„ì¹˜ë¥¼ í™•ì¸í•˜ê³  ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
    * ìµœëŒ€ ì‚¬ìš©ì ë˜ëŠ” ìµœëŒ€ ì²˜ë¦¬ëŸ‰ì„ í™•ì¸
    * ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ ì´í›„ ì‹œìŠ¤í…œì´ ìˆ˜ë™ ê°œì…ì—†ì´ ë³µêµ¬ë˜ëŠ”ì§€ í™•ì¸

1. ë¶€í•˜í…ŒìŠ¤íŠ¸ ì „ì œì¡°ê±´ì€ ì–´ëŠì •ë„ë¡œ ì„¤ì •í•˜ì…¨ë‚˜ìš”

- ëª©í‘œ ì‹œìŠ¤í…œ ë²”ìœ„
  > ngnix, tomcat, db

- ì˜ˆìƒ 1ì¼ ì‚¬ìš©ì ìˆ˜
  - ê²½ìŸì‚¬ DAU 
    - ì¶œì²˜: [êµ­ë‚´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì•±ì€?](https://blog.naver.com/rkwkrhspm/222515422896)
  
  | ì„œë¹„ìŠ¤ | DAU |
  | --- | --- |
  | ë„¤ì´ë²„ ì§€ë„ | 470,000 |
  | ì¹´ì¹´ì˜¤ ë§µ | 240,000 |
  
  - ì‹ ê·œ ì„œë¹„ìŠ¤ ì´ë¯€ë¡œ 2ìœ„ ê²½ìŸì‚¬ì˜ 1/2 ì •ë„ë¡œ ì„¤ì • 
  > ì˜ˆìƒ DAU: 120,000

- í”¼í¬ ì‹œê°„ëŒ€ì˜ ì§‘ì¤‘ë¥  ì˜ˆìƒ
  - ì§€í•˜ì²  ìŠ¹í•˜ì°¨ ì¸ì›ì´ ì¶œí‡´ê·¼ ì‹œê°„ëŒ€ ì—ëŠ” ì•½ 100ë§Œëª…, í‰ì†Œì—ëŠ” ì•½ 50ë§Œëª… ì…ë‹ˆë‹¤.
    - ì¶œì²˜: [ë°ì´í„°ë¡œ ë³´ëŠ” ì„œìš¸ì‹œ ëŒ€ì¤‘êµí†µ ì´ìš©](https://www.bigdata-map.kr/datastory/traffic/seoul)
  - ìµœëŒ€ íŠ¸ë˜í”½ì„ 100ë§Œ, í‰ì†Œ íŠ¸ë˜í”½ì„ 50ë§Œìœ¼ë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
  > ìµœëŒ€ íŠ¸ë˜í”½(1,000,000) / í‰ì†Œ íŠ¸ë˜í”½(500,000) = 2

- í•œ ëª… ë‹¹ 1ì¼ í‰ê·  ì ‘ì† íšŸìˆ˜ ê³„ì‚°
  - ì¹´ì¹´ì˜¤ ë§µ, ì¹´ì¹´ì˜¤ ì§€í•˜ì² ì˜ í‰ê·  ì‹¤í–‰ íšŸìˆ˜ê°€ 3 íšŒ ì •ë„ ì…ë‹ˆë‹¤. 
    - (ì¶œì²˜: [ì¹´ì¹´ì˜¤ ëª¨ë°”ì¼ APP í˜„í™© ](https://ko.lab.appa.pe/2016-09/kakao-korea.html))
  - ì§€ë„ ì•±ì˜ ê²½ìš° ì ‘ì† ì‹œ ë§ˆë‹¤ ë¡œê·¸ì¸ì„ í•˜ëŠ” ê²½ìš°ëŠ” ë“œë¬¼ê¸° ë•Œë¬¸ì— ë¡œê·¸ì¸ ìš”ì²­ì€ í…ŒìŠ¤íŠ¸ì—ì„œ ì œì™¸ í•˜ì˜€ìŠµë‹ˆë‹¤.
  > 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜: 3íšŒ \
  > 1ëª…ë‹¹ 1ì¼ í‰ê·  ìš”ì²­ ìˆ˜: 3íšŒ \
  > ì£¼ìš” ìš”ì²­ ê²½ë¡œ: ë©”ì¸ í˜ì´ì§€ -> ê²½ë¡œ í˜ì´ì§€ -> ê²½ë¡œ ê²€ìƒ‰ ìš”ì²­ 

- Throughput
  > 1ì¼ ì´ ì ‘ì† ìˆ˜ - 1ì¼ ì‚¬ìš©ì ìˆ˜ * 1ëª…ë‹¹ 1ì¼ í‰ê·  ì ‘ì† ìˆ˜ = 120,000 * 3 = 360,000 \
  > 1ì¼ ìµœëŒ€ rpa  - 1ì¼ ì´ ì ‘ì† ìˆ˜ / 86,400 = 360,000 / 86,400 = 4.1667 = 4.2 \
  > 1ì¼ ìµœëŒ€ rps  - 1ì¼ í‰ê·  rps * í”¼í¬ ì‹œê°„ëŒ€ ì§‘ì¤‘ë¥  = 4.2 * 2 = 8.4

- Latency
  > 100ms ì´ë‚´

- ë¶€í•˜ ìœ ì§€ ê¸°ê°„
  > Smoke Test: 1ë¶„ \
  > Load Test: 30ë¶„ \
  > Stress Test: 1ì‹œê°„

3. Smoke, Load, Stress í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ê²°ê³¼ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”
> monitoring directory ì— ì²¨ë¶€

---

### 3ë‹¨ê³„ - ë¡œê¹…, ëª¨ë‹ˆí„°ë§

#### ìš”êµ¬ì‚¬í•­
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ë‹¨í•˜ê¸° ì‹¤ìŠµì„ ì§„í–‰í•˜ê³  ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ ìˆ˜ì •
- ë¡œê·¸ ì„¤ì •
- Cloudwatch ë¡œ ëª¨ë‹ˆí„°ë§

#### ë¡œê·¸ ì„¤ì •
- [x] Application Log íŒŒì¼ë¡œ ì €ì¥
  - [x] íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“±ì˜ ì´ë²¤íŠ¸ì— ë¡œê¹… ì„¤ì •
  - [x] ê²½ë¡œ ì°¾ê¸° ë“±ì˜ ì´ë²¤íŠ¸ ë¡œê·¸ë¥¼ JSON ìœ¼ë¡œ ìˆ˜ì§‘
- [x] Ngnix Access Log ì„¤ì •

#### Cloudwatch ë¡œ ëª¨ë‹ˆí„°ë§
- [x] Cloudwatch ë¥¼ í†µí•œ ë¡œê·¸ ìˆ˜ì§‘
- [x] Cloudwatch ë¥¼ í†µí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- [x] USE ë°©ë²•ë¡ ì„ í™œìš©í•˜ê¸° ìš©ì´í•˜ë„ë¡ ëŒ€ì‹œë³´ë“œ êµ¬ì„±

#### USE ë°©ë²•ë¡ 
- U: Utilization - ì–¼ë§Œí¼ ìì›ì„ ì¼ëŠ”ì§€
- S: Saturation - ì–¼ë§ˆë‚˜ ë§ì€ ë¶€í•˜ê°€ ëª°ë¦¬ëŠ”ì§€
- E: Error - ì—ëŸ¬ê°€ ë°œìƒí–ˆëŠ”ì§€
- ì—ëŸ¬ê°€ ì¡´ì¬í•˜ëŠ”ê°€? -> ìì›ì„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ”ê°€? -> ë¶€í•˜ê°€ ëª°ë¦¬ê³  ìˆëŠ”ê°€? ì˜ ìˆœì„œë¡œ ì²´í¬

1. ê° ì„œë²„ë‚´ ë¡œê¹… ê²½ë¡œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”
- /var/infra-subway-monitoring/log

2. Cloudwatch ëŒ€ì‹œë³´ë“œ URLì„ ì•Œë ¤ì£¼ì„¸ìš”
- https://ap-northeast-2.console.aws.amazon.com/cloudwatch/home?region=ap-northeast-2#dashboards:name=hahoho87-dashboard
